<!DOCTYPE html>
<head>
    <title>Sudokuvania: Digits of Despair Walkthrough</title>

    <style>
        .hidden {
            background-color: currentColor;
        }
        .revealed {
            text-decoration: underline;
        }
        table.grid {
            border-spacing: 0px;
        }
        table.grid tr td {
            border: 1px solid black;
            width: 1em;
            height: 1em;
            text-align: center;
            font-size: 1.5em;
        }
        table.grid tr td.r {
            border-right: 3px solid black;
        }
        table.grid tr td.l {
            border-left: 3px solid black;
        }
        table.grid tr td.t {
            border-top: 3px solid black;
        }
        table.grid tr td.b {
            border-bottom: 3px solid black;
        }
        table.grid tr td.sr {
            border-right: 5px solid black;
        }
        table.grid tr td.sl {
            border-left: 5px solid black;
        }
        table.grid tr td.st {
            border-top: 5px solid black;
        }
        table.grid tr td.sb {
            border-bottom: 5px solid black;
        }
        table.grid tr td.tan {
            background-color: tan;
        }
        table.grid tr td.blue {
            background-color: cornflowerblue;
        }
        table.grid tr td.wall {
            background-color: rebeccapurple;
        }
        table.grid tr td.cave {
            background-color: lightsteelblue;
        }
        table.grid tr td.lamp {
            background-color: gold;
        }
        table.grid tr td.snake {
            background-color: goldenrod;
        }

        table.worksheet tr td {
            text-align: center;
            width: 3em;
        }
        table.worksheet tr th {
            text-align: center;
            width: 3em;
        }

    </style>

    <script type="module">
        "use strict";
        function handleClick(e) {
            let target = e.target;
            while (target !== null) {
                let classes = target.classList;
                if (classes.contains("hidden")) {
                    classes.remove("hidden");
                    classes.add("revealed");
                } else if (classes.contains("revealed")) {
                    classes.remove("revealed");
                    classes.add("hidden");
                }
                target = target.parentNode;
            }
        }
        function enableClickHandlers() {
            console.log("starting");
            for (const elt of document.getElementsByClassName("hidden")) {
                console.log("hello" + elt);
                elt.addEventListener("click", handleClick);
            }
            console.log("done");
        }
        enableClickHandlers();
    </script>
</head>
<body>
    <pre>
                                                                                                                                       OOOOOO
                                                                                                                                      OO    OO
                                                                                                                                      O      O
                                                                                                                                      OO    OO
                            OOOO                                                                                                       OOOOOO
                            OOOO                                                                                                         ||
        SSSSSSSS       UUU        UUU    DDDDDDDDDDD          OOOOOOOO       KXK        KXK    UUU        UUU    VVV        VVV        AAAAAA        NNN        NNN    IIIIIIIIIIIIII        AAAAAA
      SSSSSSSSSSSS     UUU        UUU    DDDDDDDDDDDDD      OOOOOOOOOOOO     KXK       KXK     UUU        UUU    VVV        VVV        AAAAAA        NNN        NNN    IIIIIIIIIIIIII        AAAAAA
     SSSS      SSSS    UUU        UUU    DDD       DDDD    OOOO      OOOO    KXK      KXK      UUU        UUU    VVV        VVV       AAA||AAA       NNNN       NNN         IIII            AAA  AAA
     SSS               UUU        UUU    DDD        DDD    OOO        OOO    KXK     KXK       UUU        UUU    VVV        VVV       AAA||AAA       NNNNN      NNN         IIII            AAA  AAA            OOOO
     SSS               UUU        UUU    DDD        DDD    OOO        OOO    KXK    KXK        UUU        UUU     VVV      VVV        AAA||AAA       NNNNNN     NNN         IIII            AAA  AAA            OOOO
     SSSS              UUU        UUU    DDD        DDD    OOO        OOO    KXK   KXK         UUU        UUU     VVV      VVV       AAA || AAA      NNN NNN    NNN         IIII           AAA    AAA
      SSSSSSS          UUU        UUU    DDD        DDD    OOO        OOO    KXKXKKXK          UUU        UUU     VVV      VVV       AAAAAAAAAA      NNN  NNN   NNN         IIII           AAAAAAAAAA
        SSSSSSSS       UUU        UUU    DDD        DDD    OOO        OOO    KXKXKXK           UUU        UUU      VVV    VVV        AAAAAAAAAA      NNN   NNN  NNN         IIII           AAAAAAAAAA
           SSSSSSS     UUU        UUU    DDD        DDD    OOO        OOO    KXK  KXK          UUU        UUU      VVV    VVV       AAAA || AAAA     NNN    NNN NNN         IIII          AAAA    AAA
               SSSS    UUU        UUU    DDD        DDD    OOO        OOO    KXK   KXK         UUU        UUU      VVV    VVV       AAA  ||  AAA     NNN     NNNNNN         IIII          AAA      AAA
                SSS    UUU        UUU    DDD        DDD    OOO        OOO    KXK    KXK        UUU        UUU       VVV  VVV        AAA  ||  AAA     NNN      NNNNN         IIII          AAA      AAA          OOOO
                SSS    UUU        UUU    DDD        DDD    OOO        OOO    KXK     KXK       UUU        UUU       VVV  VVV       AAA   ||   AAA    NNN       NNNN         IIII         AAA        AAA         OOOO
     SSSS      SSSS    UUUU      UUUU    DDD       DDDD    OOOO      OOOO    KXK      KXK      UUUU      UUUU       VVV  VVV       AAA   ||   AAA    NNN        NNN         IIII         AAA        AAA
      SSSSSSSSSSSS      UUUUUUUUUUUU     DDDDDDDDDDDDD      OOOOOOOOOOOO     KXK       KXK      UUUUUUUUUUUU         VVVVVV        AAA   ||   AAA    NNN        NNN    IIIIIIIIIIIIII    AAA        AAA
        SSSSSSSS          UUUUUUUU       DDDDDDDDDDD          OOOOOOOO       KXK        KXK       UUUUUUUU           VVVVVV        AAA   ||   AAA    NNN        NNN    IIIIIIIIIIIIII    AAA        AAA
                                                                                                                                         ||
                                                           DDDDDDDDDDD       IIIIIIIIIIIIII       GGGGGGGG       IIIIIIIIIIIIII    TTTTTTTTTTTTTT       SSSSSSSS                            OOOOOOOO       FFFFFFFFFFFFFF
                                                           DDDDDDDDDDDDD     IIIIIIIIIIIIII     GGGGGGGGGGGG     IIIIIIIIIIIIII    TTTTTTTTTTTTTT     SSSSSSSSSSSS                        OOOOOOOOOOOO     FFFFFFFFFFFFFF
                                                           DDD       DDDD         IIII         GGGG      GGGG         IIII              TTTT         SSSS      SSSS                      OOOO      OOOO    FFF
                                                           DDD        DDD         IIII         GGG                    IIII              TTTT         SSS                                 OOO        OOO    FFF
                                                           DDD        DDD         IIII         GGG                    IIII              TTTT         SSS                                 OOO        OOO    FFF
                                                           DDD        DDD         IIII         GGG                    IIII              TTTT         SSSS                                OOO        OOO    FFF
     ------------------------------------------            DDD        DDD         IIII         GGG                    IIII              TTTT          SSSSSSS                            OOO        OOO    FFF
                                               \           DDD        DDD         IIII         GGG                    IIII              TTTT            SSSSSSSS                         OOO        OOO    FFFFFFFFF
     ---------------------------------------    \          DDD        DDD         IIII         GGG     GGGGGG         IIII              TTTT               SSSSSSS                       OOO        OOO    FFFFFFFFF
                                            \    \         DDD        DDD         IIII         GGG     GGGGGG         IIII              TTTT                   SSSS                      OOO        OOO    FFF
                                             \    \        DDD        DDD         IIII         GGG        GGG         IIII              TTTT                    SSS                      OOO        OOO    FFF
                                              \    \       DDD        DDD         IIII         GGG        GGG         IIII              TTTT                    SSS                      OOO        OOO    FFF
                                               \    \      DDD       DDDD         IIII         GGGG      GGGG         IIII              TTTT         SSSS      SSSS                      OOOO      OOOO    FFF
                                                \    \     DDDDDDDDDDDDD     IIIIIIIIIIIIII     GGGGGGGGGGGGG    IIIIIIIIIIIIII         TTTT          SSSSSSSSSSSS                        OOOOOOOOOOOO     FFF
                                                 \    \    DDDDDDDDDDD       IIIIIIIIIIIIII       GGGGGGGG GG    IIIIIIIIIIIIII         TTTT            SSSSSSSS                            OOOOOOOO       FFF
    +==================================+          \    \                                                                                 ||
    |        P U Z Z L E    B Y        |           \    \                                                        DDDDDDDDDDD       EEEEEEEEEEEEEE       SSSSSSSS       PPPPPPPPPPP           AAAAAA        IIIIIIIIIIIIII    RRRRRRRRRRR
    |                                  |            \    \                                                       DDDDDDDDDDDDD     EEEEEEEEEEEEEE     SSSSSSSSSSSS     PPPPPPPPPPPPP         AAAAAA        IIIIIIIIIIIIII    RRRRRRRRRRRRR
    | S K E P T I C A L      M A R I O |             \    \                                                      DDD       DDDD    EEE   ||          SSSS      SSSS    PPP       PPPP       AAA  AAA            IIII         RRR       RRRR
    +==================================+              \    \                                                     DDD        DDD    EEE\\ || //       SSS               PPP        PPP       AAA  AAA            IIII         RRR        RRR
    |         G U I D E    B Y         |               \    \                                                    DDD        DDD    EEE \\||//        SSS               PPP        PPP       AAA  AAA            IIII         RRR        RRR
    |                                  |                \    \                                                   DDD        DDD    EEE  \||/         SSSS              PPP       PPPP      AAA    AAA           IIII         RRR       RRRR
    |          ~-aRjIMikKaL-~          |                 \    ---------------------------------------------------DDD--------DDD----EEEEEEEEE----------SSSSSSS----------PPPPPPPPPPPPP-------AAAAAAAAAA-----------IIII---------RRRRRRRRRRRR----
    +==================================+                  \                                                      DDD        DDD    EEEEEEEEE            SSSSSSSS       PPPPPPPPPPP         AAAAAAAAAA           IIII         RRRRRRRRRRRR
    |   F B I    D I S C L A I M E R   |                   ------------------------------------------------------DDD--------DDD----EEE---------------------SSSSSSS-----PPP----------------AAA------AAA----------IIII---------RRR--RRR--------
    |                                  |                                                                         DDD        DDD    EEE                         SSSS    PPP                AAA      AAA          IIII         RRR   RRR
    |    THIS GUIDE IS PROVIDED FOR    |                                                                         DDD        DDD    EEE                          SSS    PPP                AAA      AAA          IIII         RRR    RRR
    |      YOUR PERSONAL USE ONLY      |                                                                         DDD        DDD    EEE                          SSS    PPP               AAA        AAA         IIII         RRR     RRR
    | I CANNOT BE HELD RESPONSIBLE FOR |                                                                         DDD       DDDD    EEE               SSSS      SSSS    PPP               AAA        AAA         IIII         RRR      RRR
    |   ILLEGAL DOWNLOADING OF FILES   |                                                                         DDDDDDDDDDDDD     EEEEEEEEEEEEEE     SSSSSSSSSSSS     PPP               AAA        AAA    IIIIIIIIIIIIII    RRR       RRR
    +==================================+                                                                         DDDDDDDDDDD       EEEEEEEEEEEEEE       SSSSSSSS       PPP               AAA        AAA    IIIIIIIIIIIIII    RRR        RRR
    </pre>

    <h1>Sudokuvania: Digits of Despair</h1>

    <h2>Introduction</h2>
    
    <p>Sudokuvania: Digits of Despair is a sudoku puzzle hunt that pays tribute to the classic gameplay of action-adventure games like Metroid and Castlevania: exploring a strange new place full of mystery and danger, then gradually coming to master it by defeating enemies and discovering new equipment and techniques to help you in your journey. It uses rules from a variety of common sudoku variants, primarily fog, thermometers, arrows, kropki dots, and German whisper lines, as well as a number of less established rules. It is widely considered very difficult, even for people well-practiced in variant sudoku solving.</p>

    <p>The puzzle was set by Skeptical Mario and <a href="https://logic-masters.de/Raetselportal/Raetsel/zeigen.php?chlang=en&id=000MQQ">first uploaded to logic-masters.de</a> on April 5th, 2025. You can find a link to the puzzle on that site, as well as a personal statement from the author.</p>
    
    <p>Sudokuvania: Digits of Despair uses the SudokuPad web-based solving software. Because Sudokuvania makes heavy use of fog mechanics, it is not possible to complete the "world map" as intended without using this software. As of the time of this writing (mid-July 2025), SudokuPad's support for puzzles the size of Sudokuvania continues to be more than a little janky. Please take the following advice (some of which is repeated in the game rules):</p>

    <ul compact>
        <li>You must turn on Experimental > Test Large Puzzle UI in order to be able to zoom and scroll the world map, which is required unless you're solving on a truly enormous screen or have very good eyesight. The current experimental UI requires a mouse or similar input mechanism and does not support mobile devices, so you can only really work on the world map on a laptop or desktop computer. Boss puzzles are ordinary 9&times;9 grids and can be solved on any device.</li>
        <li>You can zoom in and out of the world map using a mouse scroll wheel. On a MacBook, you can use a two-finger drag, but it doesn't work very well. The zoom mechanics can be somewhat unintuitive and frustrating, especially when zooming in or out near the edge of the map.</li>
        <li>You can scroll around the world map by dragging with the right mouse button. I do not believe there is an equivalent touchpad gesture.</li>
        <li>If you find yourself stuck or lost, you can always reset the current view of the world map by toggling Test Large Puzzle UI off. You'll need to toggle it back on before you can zoom or scroll again. This does not reset your solution at all.</li>
        <li>You should turn on Visual > Draw Arrows Above Lines or else several clues will be very difficult to read.</li>
        <li>Skeptical Mario also suggests turning on Visual > Disable Emoji Replacement.</li>
    </ul>

<h2>Spoiler-free overview and advice</h2>

    <p>In Sudokuvania: Digits of Despair, you are an adventurer exploring the mysterious castle of Sudokuvania. Sudokuvania is organized into a <i>world map</i> for the castle (the puzzle that the link above takes you to) and a set of <i>boss puzzles</i> (independent puzzles that are linked at various points from the world map). The world map can be further broken down into a set of partially-overlapping <i>grids</i>, which are NxN squares with heavy black outlines in which the standard rules of NxN sudoku hold, as if each grid were an independent puzzle. This information can be found as the first entry in the Learned Rules box, in the top-left corner of the world map. As you progress through Sudokuvania, you will discover new rules that will be added to the box. These rules generally hold only on the world map, and the boss puzzles will have their own rulesets.

    <p>When you have a cell selected on the world map, the text at the bottom of the puzzle description box (the green box in the top-right of the SudokuPad UI, beneath the puzzle title) will change to talk about what you've selected:
    <ul compact>
        <li>Selecting a cell in the Learned Rule box talks more about the rule.</li>
        <li>Selecting a cell in a grid describes the region as your character sees it. This is often just flavor text, but it sometimes contains clarifications for how the rules apply to the region. You will also find a link to the boss puzzle for the region; see below.</li>
        <li>Selecting a cell with a <fixed>!</fixed> mark reveals the explanatory text for a quest (this is meant to look like a quest marker, like you often see on NPCs in an MMORPG). If you aren't sure what to do with a quest, be sure to go back and read its quest text.</li>
    </ul>
    You can click on cells that you haven't yet revealed and read ahead, but you don't need to, and you'll only be spoiling things for yourself.

    <p>Boss puzzles are associated with specific cells in each of the major grids of the world map. These cells are marked with the "smiling face with horns" emoji (&#x1f608;) and never appear in the cells that overlap multiple grids. While you can solve boss puzzles immediately once you enter the region and can read the puzzle link in the description box, the instruction you receive after defeating the boss is always to place a specific digit in the boss cell. Therefore, you cannot actually progress on the world map by solving boss puzzles before you reveal its corresponding boss cell.

    <p>As you might expect, the boss puzzles in Sudokuvania are often quite challenging, but you should also not underestimate the difficulty of the world map. You will probably spend at least as much time trying to figure out the logic on the world map as you do on the bosses. Don't imagine you'll knock the whole hunt out in an afternoon, or even a day; my own personal solve time was close to 24 hours, spread over an entire weekend in which I fortunately didn't have many other responsibilities. Pace yourself and enjoy the experience. If nothing else, trying to solve while you're mentally fatigued will probably just lead to a lot of silly logic errors and frustration.

    <p>Just like in Metroid and Castlevania, you will often find parts of the world map that you cannot solve until you have worked on a different part of the puzzle. In fact, even the 6x6 entrance area cannot be solved until you've completed several other regions. Backtracking is an important part of the experience. Because the world map really can be quite a hard puzzle on its own, of course, you won't always be sure if you're <i>supposed</i> to be backtracking, or if you're just missing something.
        
    <p>This guide is written in a way that I hope will allow you to "incrementally" get yourself unstuck. Text that is not hidden by default (<span class="hidden">like this</span>) should provide a general outline of what parts of the puzzle to focus on. Additionally, each paragraph in the guide starts with a hint or prompt that is not an outright spoiler for any of the logic. This initial hint will sometimes itself be hidden, if I feel that finding it is an interesting part of the challenge, but you can safely reveal it without worrying that I'll be giving away the logic. This applies <i>only</i> to the first phrase in the paragraph, whether it is hidden or not. If that phrase trails off and leads into some hidden text, the hidden text is very likely to be at least a partial spoiler. Later hidden text in a paragraph generally builds on the conclusions reached earlier in the paragraph. The hidden text does cover every major leap of logic in Sudokuvania, and you <i>will</i> spoil the puzzle if you read it all.

    <p>Please don't imagine that I myself solved Sudokuvania in exactly the way I've presented it here. This guide leaves out an awful lot of details, like marking up the possible values of various cells and staring perplexedly at the screen, in favor of just presenting the core logic, which inevitably makes it seem like I found it all rather straightforward. This walkthrough was written during my second solution of the puzzle. While I did solve it on my own, both times from scratch, I found it a very challenging puzzle, and I frequently found myself making mistakes and unsure of how to make progress, even on the second time. I have also frequently re-ordered the logic from the way I originally discovered it, in order to present related conclusions together. My actual soluton was much more scatter-shot and inelegant.

    <p>The hiding of spoilers in this guide only works in a browser that supports CSS. If you have JavaScript disabled, you can read a spoiler by highlighting the text. If you have JavaScript enabled, you can also read a spoiler by clicking on it; you can then re-hide it by clicking on it again.

    <p>A very minor early spoiler, which you can read once you've revealed the first half of the Courtyard: <span class="hidden">clues don't always stay within grids. The rules for cells outside of grids are somewhat different, and you should not make deductions that assume that clues work the same way outside of grids as they do within them. Rest assured that the off-grid rules will eventually be explained</span>.

    <p>This guide will use several shorthands and pieces of jargon:
        <ul compact>
            <li>rX means row X of the current grid, with r1 being the top-most row.</li>
            <li>cY means column Y of the current grid, with c1 being the left-most column.</li>
            <li>rXcY means the cell in row X and column Y.</li>
            <li>rXcY = D means the digit in rXcY is D.</li>
            <li>bN means box N of the current grid, counting left-to-right, top-to-bottom. In a standard 9&times;9 sudoku grid, b1 is the top left box and b6 is the central box on the right side.</li>
            <li>X/Y/Z means "X, Y, or Z".</li>
            <li>"Sudoku" means the ordinary rules of sudoku. If I say that you should do sudoku, I mean that you can make some progress by just applying those rules for a bit, with the implication that it's not too tricky or else I'd be giving you more hints.</li>
            <li>A cell "sees" another cell if the rules of the puzzle would force them to have different digits, whether that's from the row/column/box restrictions of ordinary sudoku or from some other rule.</li>
            <li>A "set" means a group of N cells that all see each other and that are all restricted to the same set of N digits (or subsets of it). For example, the unfilled cells in r1 of this mini grid form a 1/2/3 set:
                <table class="grid">
                    <tr><td></td><td class="r"></td><td></td><td>4</td></tr>
                    <tr><td>4</td><td class="r"></td><td>2</td><td></td></tr>
                </table>
                r1c3 here is more constrained than 1/2/3 (it must be 1/3), but that's fine. If another cell saw all three of these cells, it would not be able to contain 1/2/3, because no matter how the digits were filled in, it would see each of them.
            </li>
            <li>A "pair" is just a set of two digits. The unfilled cells in r2 of the example above form a 1/3 pair.</li>
            <li>A "naked single" is a cell that only has one remaining possible digit.</li>
        </ul>

<h2>Chapter 1. Front Gate (grid 0)</h2>

    <p>Take a moment to familiarize yourself with both the UI and the shorthands I'll be using in this guide:
        <ul compact>
            <li>Zoom in so that you can clearly see the starting grid and read the rules text beneath it.</li>
            <li>Read what the puzzle description (green box in the top-right of the UI) has to say about the Front Gate. It's not much, but it's a good practice to get into.</li>
            <li>There are several given digits. One of them, r4c1 = 4, is in box b4.</li>
        </ul>

    <p>You can see a bit of a green line in r3c1. This is a clue, but you don't have a rule for it yet, so you have to ignore it for now.

    <p>The puzzle here is straightforward sudoku, but you will not be able to complete it yet. Note that you will have to place digits into cells that still have fog, and that's fine. You should end up having filled two of the three cells on the border with the grid to the lower-right (the Courtyard). You can get some interesting pencil-marks in the upper half of the grid, but there's not really anything else you can do here for now. On to the next grid!

<h2>Chapter 2. Courtyard (grid 1)</h2>

    <p>Note that we've gained a new rule, Guide THERMO. Read the description in the Learned Rules box, then click on one of the rule cells in that box and read more about it at the bottom of the puzzle description box. If you've done much variant sudoku, you've probably already seen this rule, but it's good to verify that there's nothing special about it in Sudokuvania. Note that cells on a thermometer always "see" the other cells on the thermometer: because the thermometer must <i>strictly</i> increase, digits may never repeat.
        
    <p>Click on one of the cells you've revealed in the new grid, then read the description of the Courtyard in the puzzle description box. You'll see that we also have a link to the boss puzzle. Since we can't see the boss cell yet, we'll put that off until later.

    <p>There's only one clue for how to make progress in this grid right now: the thermometer. <span class="hidden">We can see that there are at least three more cells on the thermometer.</span> <span class="hidden">There's a 6 in the bulb, and there are only three digits greater than 3, so we should be able to fill all three cells.</span>

    <p>That will reveal all of b4. <span class="hidden">We can't see the bulbs for the new thermometers.</span> <span class="hidden">There must be a 1 somewhere in b4.</span> <span class="hidden">Since the 1 must be in c1 in b4, r7c1 cannot also be 1.</span> <span class="hidden">What does that mean about the value of r6c2?</span> <span class="hidden">There must also be a 2 somewhere in b4.</span> <span class="hidden">Since the 2 is also in c1 in b4, what is the least possible value of r6c2 now?</span> <span class="hidden">r4c3 is the end of a thermometer.</span>
    
    <p>You've revealed your first boss cell!
    
<h2>Chapter 3. Thermomonster (Courtyard boss)</h2>

    <p>This is a great introduction to one of the more important ideas from thermometer sudoku. A digit on a thermometer is always different from every other digit on the thermometer. When a thermometer both (1) crosses a box border and (2) shifts over to fill a different row or column, digits on the thermometer in the first box are often tightly constrained in the second. That happens three times in this puzzle:

        <ul compact>
            <li><span class="hidden">r2c2 and r3c2 in b4</span></li>
            <li><span class="hidden">r8c8 and r7c8 in b6</span></li>
            <li><span class="hidden">r9c3 in b8</span></li>
        </ul>

    <p><span class="hidden">Start with the thermometers on the sides.</span> <span class="hidden">r8c8 and r7c8 cannot be greater than 6, and </span><span class="hidden">at least one of them must be the end of one of the thermometers in b6, </span><span class="hidden">which is significant because these cells must be at least 5</span> <span class="hidden">and therefore the bulb can be at most 2.</span> <span class="hidden">Similarly, r2c2 and r3c2 cannot be less than 4, and at least one of them must be in a bulb in b4, so the end of that thermometer must be at least 8.</span> <span class="hidden">Those must be different thermometers: one goes from 1/2 to 5/6, and the other goes from 4/5 to 8/9.</span>

    <p>Can we constrain those further? <span class="hidden">What do we now know about r7c8?</span> <span class="hidden">If r7c8 = 6, c9 in b6 would have to be 7/8/9.</span> <span class="hidden">We know there's an 8/9 in this box, so that's impossible.</span> <span class="hidden">So these numbers are at most 5, but one of them has to be a thermometer end, which mean it's at least 5. Therefore, one of the thermometers is 1/2/3/4/5.</span> <span class="hidden">The same idea applies in b4: r3c2 cannot be 4 because that would force 1/2/3 in c1, which contradicts that one of the thermo bulbs is 1/2. So r3c2 and r2c2 must be at least 5, and one of them has to be in a thermo bulb, which means it's at most 5. Therefore, the other thermometer is 5/6/7/8/9.</span>

    <p><span class="hidden">It'd be nice to figure out which is which. Does one seem more constrained by other clues?</span> <span class="hidden">r9c3 is is at least 4.</span><span class="hidden">It must also be on the thermometer that runs along r7 in b8.</span> <span class="hidden">So if that's the 1/2/3/4/5 thermometer, it must be one of 2/3/4; but then b8 contains both 2 and 3 on both r7 and r8, which is a contradiction. So the thermometer starting in r6c3 must be the 5/6/7/8/9 thermometer, and the one starting in r4c3 must be 1/2/3/4/5.</span> Now let's revisit what we said before: <span class="hidden">remember that r3c2 and r2c3 must be in c3 in b4.</span> <span class="hidden">They are both at least 5, so they must be in r5c3 and r6c3, which means one of them is exactly 5, and it must be r3c2. This puts 2/3/4 in c1 in b4.</span> <span class="hidden">By the same logic, r7c8 must be 5, and c9 in b6 must be 6/7/8.</span> Remember that you can place those exactly because of the thermometer. <span class="hidden">Where can 1 be in b1? Only c1. Similarly, 9 in b9 can only be in c9.</span> <span class="hidden">This makes r3c9 and r7c1 naked singles.</span>
    
    <p>Now we can look at the remaining outer thermometers. <span class="hidden">All the cells in r8 in b8 are at most 5. r7c3 is at most 4, so r8c2 is at most 3. r8c8 is at most 4.</span> <span class="hidden">That makes five digits that are 5 or less, and 5 can only be on in b8, forcing it into r8c4.</span> <span class="hidden">r3c7 must be at least 6, so it is 6/7, r2c8 is 7/8, and r1c8 is 8/9.</span> <span class="hidden">r2c5 is at least 5, so r2c6 is at least 6. r2c4 cannot be less than 7. r2c2 cannot be less than 6. So there are at least five numbers greater than 5, and only r2c5 can be exactly 5, so it is.</span> <span class="hidden">This forces 5 in the other three boxes.</span>
    
    <p>Finally we can look at b5. <span class="hidden">If r4c6 is 6 or more, r5c5 must be 8 or more, and then r6c4 is impossible. So it is 2/3.</span> <span class="hidden">Similarly, if r6c4 is 4 or less, r5c5 must be 2 or less, and then r4c6 is impossible. So it is 7/8.</span> <span class="hidden">r4c8 can only be 2/3, so the only possible place for 2 in b5 is r4c6, which also gives r4c8 = 3.</span> <span class="hidden">The only place for 3 now in b5 is r6c6.</span> <span class="hidden">r8c6 = 1, which makes a 2/4 pair in r8c5 and r8c8, forcing r8c2 = 3 and r7c3 = 4.</span> <span class="hidden">r9c6 = 9 is a naked single.</span> <span class="hidden">r9c4 is the only possible cell for a 3 in b8.</span>
    
    <p>The remainder of the puzzle is straightforward. In case you need to refer back to it, the number to place in the boss cell is <span class="hidden">3</span>.

<h2>Chapter 4. Courtyard (grid 1)</h2>

    <p>You have now unlocked the Sum WHIP. Take a breather to read about the clue in the Learned Rules and the puzzle description. This is just arrow sudoku, but the clarification about what arrows can do in unrevealed fog cells is useful. You've also revealed some arrows in b5 and b6, and the lower arrow overlaps some thermometers.

    <p><span class="hidden">What digits can be on that lower arrow?</span> <span class="hidden">What digits can be on the thermometers leading there?</span> <span>They cannot be 4 or 5, and if either were 6+, the corresponding arrow cell would have to be 7+, forcing the arrow sum to be 9, which it cannot be. So r6c4 is 2/3 and r6c7 is 1/2/3.</span> <span class="hidden">The arrow sum cannot be greater than 8.</span> <span class="hidden">r5c5 must be at least 4, so r5c6 cannot be greater than 3.</span> <span class="hidden">Therefore r6c7 must be 1/2, which forces 3 into r6c4.</span> <span class="hidden">How is the other arrow constrained?</span> <span class="hidden">The 1 must be on it, but the other digit must be at least 4.</span> <span class="hidden">In fact, this is the only option that isn't contradicted.</span>

    <p>You can now see an arrow and a thermometer in box 8, although you can't see the end of either. <span class="hidden">There are at least three cells on the arrow.</span> <span class="hidden">The only way to make three cells sum to a single digit without using 1 is 2/3/4.</span> <span class="hidden">There is already a 3 in both columns, so there must be a 1, and it must be in either r7c5 or c8c5.</span> <span class="hidden">It cannot be in r7c5 because that is an intermediate cell on a thermometer.</span> <span class="hidden">r7c5 must be 2 or 6.</span> <span class="hidden">If it is 6, that forces a 9 into r8c4; but r8c1 must be 8/9, and that means r8c6 cannot be greater than 7, which breaks the thermometer.</span> <span class="hidden">With a 1/2 pair on the arrow, we know that the remaining cells must be either a 4/7 or 6/9 pair.</span> <span class="hidden">r4c4 must be either 6 or 9, so they must be 4/7.</span>
    
    <p>Take a moment to do some sudoku; you should be able to put a digit in <span class="hidden">r8c3</span>. This will reveal b7, but you can't do much with that information yet. Observe in particular that <span class="hidden">there's an arrow leading off the grid from r8c1, which must be at least 8; but it's also the end of an arrow, and if the adjacent cell were 9, that arrow wouldn't work. Something odd's going on. Just leave this alone.</span>

    <p>The clues in b9 are a little hard to read. There's one an arrow occupying at least r6c9, r7c9, and r8c8, and another occupying at least r9c9, r8c9, and r7c8. You can't see if the unrevealed cells are the circles of the arrows, though. <span class="hidden">The clues interact in interesting ways; you might find it helpful to mark the possibilities in the four thermometer cells.</span> <span class="hidden">r7c8 is at least 5, so r8c9 must be 2 or 3, and r7c8 cannot be greater than 7.</span> <span class="hidden">The only possible place for 9 in r7 is r7c7.</span> <span class="hidden">If r7c8 were 7, the sum on the arrow would already be 9 without including r9c9, so r9c9 would have be the circle, and it would have to be 9, which is a contradiction.</span> <span class="hidden">This creates a 5/6 pair in r7. You should be able to do a lot of sudoku now.</span> <span class="hidden">r6c9 must be 6/8/9, and the two other cells on its arrow sum to at least 4, so it cannot just be part of the sum; it must be the circle.</span> <span class="hidden">r8c8 must be 3/5/6, but only 5 actually makes a valid sum in r6c9.</span> This should let you fill all but two cells in boxes 4-9; you can mark your options in the other cells, but you can't do anything there yet. Off to the next grid!

<h2>Chapter 5. Quarters (grid 2)</h2>

    <p>Go ahead and read the description of the new area in the puzzle description. Because these two grids are offset by one cell vertically, the box lines can be a little tricky at first. <span class="hidden">There's a 1 in r3c1 which can see all three cells on this arrow, so its sum must be 9, and the circle must be in r2c4.</span> <span class="hidden">r2c5, the circle that was just revealed, cannot be greater than 5 because of the thermometer.</span> <span class="hidden">It has at least two cells on it, neither of which can be 1, so it must also be at least 5. You can fill in all the thermometer cells you can see.</span> <span class="hidden">The thermometer continues into r3c6, but this cell sees a 1, a 2, and a 3; it must be 4.</span> You should take a moment to fill in what you can, but you're locked out of the rest of this grid for now.

<h2>Chapter 6. Factory (grid 3)</h2>
        
    <p>If you filled in the possibilities right, you should be able to fill the other overlapping cell between these grids. And now you've unlocked WHISPER dash! Take the opportunity to read the grid description as well as the description of the new rule. This is the common "German whisper line" rule from variant sudoku. There are two general insights you should be able to figure out immediately about these lines: <span class="hidden">the digits on the line are never 5</span> and <span class="hidden">they alternate polarities between "high" (greater than 5) and "low" (less than 5).</span> Note that the clue in this grid doesn't actually tell us anything we don't know, because the thermometer already makes r8c2 at least 6!

    <p>There is some interesting logic you can do here to fill a few cells, but you won't make much headway beyond that. For now, you need to notice that a couple of whispers were also revealed back in the previous grid.

<h2>Chapter 7. Quarters (grid 2)</h2>

    <p>The new clues here are quite constrained. <span class="hidden">Both r4c7 and r4c9 cannot be greater than 3.</span> <span class="hidden">They also both see the 2 in r4c1, so you should be able to fill them in.</span> <span class="hidden">The newly-revealed line must have at least one digit less than 5 on it, but both cells see 1, 2, and 3, so it must be a 4/9 pair, which can be placed.</span>

    <p>This clue might be tricky to interpret. There is one line between r6c3 and r5c4, and there is a second line between r5c3 and r6c4; the fact that they cross doesn't matter. <span class="hidden">One of the digits on the first line must be greater than 5.</span> <span class="hidden">If the high digit is in r6c3, it must be 6, and r7c4 must be 1. If the high digit is in in r7c4, it must be 7, and r6c3 must be 1 because of r4c1.</span> <span class="hidden">So the second line cannot have a 1 (in either of the two cells you know of), which means the low digit cannot be r6c4: it would have to be at least 2, so r5c3 would have to be at least 7, and it can't.</span> <span class="hidden">r5c3 therefore must be 3 or 4, and if it were 4, r6c4 would have to be 9. Therefore these cells are 3 and 8.</span> <span class="hidden">The newly-revealed cell, r4c8, must be 8 by sudoku.</span>

    <p>You can see a new kind of clue, a red line, running off the grid. Curiouser and curiouser, but not much to be done with it yet. The other clues that just got revealed are more promising. <span class="hidden">These two lines meet in r7c8, so r6c7 and r6c9 must have the same "polarity", either high or low.</span> <span class="hidden">If they were low, r7c8 would have to be 9, which it cannot be.</span> <span class="hidden">r7c8 must be low. It cannot be 4 because both of the other cells would have to be 9. It cannot be 3 because they would have to be an 8/9 pair, but they both see an 8. It cannot be 2 by sudoku. So it must be 1.</span> <span class="hidden">r8c8 sees 8 and 9, and it cannot be 6 because it would force a 1 into r9c7, so it must be 7.</span> <span class="hidden">The 2 in r9c7 constrains 2 in b6 into r5c9, and the 7 in this box must be in r6c9.</span> <span class="hidden">The 3 in c8 must be in r9c8.</span> And... well that's interesting to learn.

    <p>You can do a little more in this grid before you run off to take advantage of the new rule. <span class="hidden">The 2 and 3 in r6 can only be in b5, which </span><span class="hidden">forces r6c7 = 9.</span> <span class="hidden">The 1 and 6 can only be in r6c2 and r5c3,</span><span class="hidden"> so r6c1 must be 4/5</span>. That seems to be it, though; about half the grid is still wide open. Back to the factory.

<h2>Chapter 8. Factory (grid 3)</h2>

    <p>Well, now that we have a knight's move restriction in this grid (and only in this grid), we can make some real progress. Consider the arrow. <span class="hidden">It cannot have a 1, and it cannot be a 2/3 pair because of r9c3, so it must sum to at least 6.</span> <span class="hidden">But its digit is constrained in b7: it cannot be on its own arrow, so it must be 6/7.</span> <span class="hidden">If r8c1 were 7, r6c1 would be forced to be 6, but r9c3 would also be forced to be 2, and it would be impossible to fill the arrow.</span> <span class="hidden">If r8c2 were 6, r9c3 would be forced to be 2 again, and either possibility for r6c1 leads to a contradiction.</span>  <span class="hidden">r6c1 is interesting.</span> <span class="hidden">The arrow cannot have a 1, and it cannot be a 2/3 pair because of r9c3, so it must sum to at least 6.</span> <span class="hidden">But its digit is constrained in b7: it cannot be on its own arrow, and it cannot be in r8c2 by the knight restriction, so it must be in one of the other three cells. And those cells are filled with 1, 2/3, and 5/6. So it must be 6.</span> You should be able to finish the thermometer and b7.
    
    <p>You can now see a relatively long thermometer in b5. <span class="hidden">r6c4 has at least two digits both less and greater than it, and it cannot be 4, 5, or 6, so it must be 3 or 7.</span> <span class="hidden">If it were 3, one of the ends of the thermometer would have to be 321, but both of the cells that a 2 could be in are a knight's move from r7c3. So it is 7.</span> <span class="hidden">That means one of the ends must be 789. If the 9 were in r6c6, there would be nowhere to place 9 in b8.</span> <span class="hidden">r6c5 must be less than 7 by the thermometer, but it cannot be 6 or 5, so it is 2/3/4.</span> <span class="hidden">The 3 in b8 must be in c6, so it must be in c5 in b5.</span> <span class="hidden">r5c3 must be low, but it cannot be 2 or 4, and it cannot be 3 because it would see all three possible positions of 3 in b5. Therefore it is 1.</span> <span class="hidden">r7c4 is now a naked single 6.</span> <span class="hidden">The only possible place for 1 in b8 is r8c5.</span> <span class="hidden">This forces 1 in b5 into r4c6.</span> And now we've found our second boss cell!

<h2>Chapter 9. Disassembly Line (factory boss)</h2>

    <p>This is a very clever exercise in both of those general insights about German whisper lines.
        
    <p><span class="hidden">Note that the whisper lines never occupy a complete column.</span> <span class="hidden">5 can never be on a whisper line, so it's heavily constrained here.</span> <span class="hidden">You should be able to place all nine 5s right away:</span> <span class="hidden">there's only 1 cell that's not on a whisper line in both c2 and c8, </span><span class="hidden">which only leaves one possible cell in c5, </span><span class="hidden">which restricts c4 and c6 via the knight constraint, </span><span class="hidden">which restricts c3 and c7 via the knight constraint, </span><span class="hidden">which finally resists c1 and c9.</span>
    
    <p>What can you deduce about where certain digits go on the lines? <span class="hidden">4 and 6 cannot be next to two cells on the same line, so the ends of the two long lines form a 4/6 pair, on both lines.</span> <span class="hidden">The 4 must be next to a 9, and the 6 must be next to a 1, so the next cells in must be a 1/9 pair, again on both lines.</span> <span class="hidden">Since 3 cannot be at an end, it must be next to the 8 and 9, and similarly 7 must be next to the 1 and 2. So the next cells in form a 3/7 pair, and the middle two cells must be 2/7.</span> From top to bottom, then, each long line is <span class="hidden">4/6, 1/9, 3/7, 2/8, 2/8, 3/7, 1/9, 4/6</span>.

    <p>Time for some coloring. If you're new to this, shading cells in different colors can be a very useful tool for reasoning about where certain digits must be even when you aren't sure of the exact digits. In this puzzle, it's going to be very useful to reason about high and low digits. You don't know whether the digit in r1c2 is high or low, but you know it's one of those; and you know that the cell in r2c2 is the opposite, and that the cell is r3c2 is the opposite of that, and so on. Use the color tool (in the bottom right of the SudokuPad UI) to shade r1c2 dark gray and r2c2 purple. Every cell you mark gray will have the same high/low polarity as r1c2, and every cell you mark purple will have the opposite. You can use whatever colors you like, of course, but I think these two look nice and are still readable on the light blue background that Skeptical Mario chose for this grid.

    <p>You can start by marking all of the cells on the line in c2, alternating down the line. What do you know about c8? <span class="hidden">r5c2 and r5c8 form a 2/8 pair, so they must have opposite polarity. That should let you mark the whole line in c8.</span> <span class="hidden">Note that both lines have the same sequence of polarities from top to bottom.</span> <span class="hidden">This means the lines are actually the exact same sequence of digits top to bottom: e.g. both r7c2 and r8c8 are either 1 and 9, and they have the same polarity, so they are either both 1 or both 9.</span>

    <p>What you're going to do now is basically play sudoku without knowing exactly which digits you're using. Essentially, you're exploring two hypotheses at once: the one where r1c2 is <span class="hidden">4 (so gray is low and purple is high)</span> and the one where it's <span class="hidden">6 (so gray is high and purple is low)</span>. Eventually you'll hit a constraint that only works with one or the other, and you'll be able to fill in a lot of actual digits very quickly. In the meantime, you can still reason about them as "abstract digits", because the combination of (1) constraining a cell to either a low or high digit (e.g. it contains either 3 or 7) and (2) giving it a specific color (e.g. it is purple) means that, under each hypothesis, you've narrowed it down to exactly one digit (e.g. if purple is high, it must be 7). So you can just do sudoku with "abstract digits": the purple 3/7 is a different digit from both the purple 4/6 and the gray 3/7.
        
    <p>Let's start by looking at r1c2. <span class="hidden">This is the gray 4/6, and it's in r1c2 and r2c8, so it must be in r3 in b2. It cannot be in r3c6 because of the knight restriction. It cannot be in r3c5 because it would be in the middle of a line, so both of the cells it's connected to would have to be the purple 1/9. So you can mark r3c4 as the gray 4/6.</span> <span class="hidden">Parallel logic places the purple 4/6 in r7c6. This puzzle has a lot symmetry, so whenever you figure something out about one digit, check to see if the same applies to its opposite.</span>
        
    <p>The middle row of boxes is very constrained. <span class="hidden">The gray 3/7 can only be in r5c4 in r5, and the purple 3/7 can only be in r5c6.</span> <span class="hidden">There is only one remaining cell for those in r6 and r4, respectively.</span> <span class="hidden">Where does the gray 1/9 go in r6? Only in c5 or c6, and it's a 1/9, so it cannot go in the center of a thermometer. Parallel logic puts the purple 1/9 in r4c4.</span> <span class="hidden">And of course they must be 1 and 9, respectively, which means purple is high and gray is low. You should be able to place an exact digit into every cell you've colored now.</span>

    <p>You should be able to finish the puzzle from here. The digit to place back in the boss cell is <span class="hidden">8</span>.

<h2>Chapter 10. Factory (grid 3)</h2>

    <p>You've revealed the rest of the factory, and you've unlocked a new rule: DOUBLE jump. Go ahead and read about the new rule. If you're used to variant sudoku, this is just a standard Kropki black dot, making one digit the double of the other. This means the lower digit must be 1, 2, 3, or 4, and the higher must be 2, 4, 6, or 8; so a digit adjacent to a dot can never be 5, 7, or 9.

    <p>But first, try to make some progress with the digit you just got. <span class="hidden">The 8 in b8 can only be in c6, so it must be in c5 in b2, which means it must be in r1c5.</span> <span class="hidden">In b4, it must be in c3, so it must be in c2 in b1, and therefore r2c2.</span> <span class="hidden">Now it can no longer be in r4c3, so it's in r6c3, which constrains it in b6 as well.</span>

    <p>Now we can use our new clue. <span class="hidden">The black dot tells us that r5c8 must be 4.</span> <span class="hidden">So the 4 in r6 can only be in r6c5.</span> <span class="hidden">r5c2 can only be 3, which means you can fill every cell in b5.</span> <span class="hidden">This makes r6c7 a naked single 3, which makes </span><span class="hidden">r8c6 a naked single 9.</span> <span class="hidden">There is only one remaining cell for 5 in b4.</span> <span class="hidden">r4c3 can only be 4.</span> <span class="hidden">r2c3 can only be 7.</span> <span class="hidden">That constrains 7 in b2 into c6, which means the only cell left for it in c5 is r7c5.</span> <span class="hidden">And that places the last two 8s in the grid.</span>

    <p><span class="hidden">b9 is a nice place to look next.</span> <span class="hidden">The remaining cells in r8 are 2/3/4, but </span><span class="hidden">knight constraints force r8c7 to be 4 and r8c9 to be 3.</span> <span class="hidden">The dotted cells in b3 now cannot have a 3 or a 4, so they must be a 1/2 pair.</span> The rest of the grid is straightforward, and you should have it completely filled.

    <p>Hmm. You can see some book clues (&#x1f4d6;) in the new grid, but you don't know what they mean. You must be missing something somewhere else.

<h2>Chapter 11. Front Gate (grid 0)</h2>

    <p>Did you forget that there was a bit of green line here? You know what that means now. Go ahead and place a <span class="hidden">1 in r2c1</span>, and a little sudoku from there will reveal the rest of the grid.

    <p>That black dot is interesting. <span class="hidden">You know that the left cell must be 4/6 and the right cell must be 1/2/3.</span> <span class="hidden">So it must be a 2/4 or 3/6 pair. But if it's a 2/4 pair, it'll be impossible to place a digit in r2c2.</span> That should let you finish the front gate at last.

<h2>Chapter 12. Battlements (grid 4)</h2>

    <p>Take a moment to read the description of the new grid. It might not look like you can do much here, but <span class="hidden">that black dot is more constrained that it might seem.</span> <span class="hidden">It cannot be a 1/2 or 3/6 pair, so it must be 2/4 or 4/8. Both have a 4, and the 4 cannot be in b7.</span>

    <p>An eye outside the grid? <i>Another</i> clue you can't do anything with yet. But there are a lot of other cells revealed. <span class="hidden">The dotted cells in c1 see a 3 and 4, so it must be a 1/2 pair.</span> <span class="hidden">r3c2 therefore has to be 1/2/4, but it cannot be 1 or 4.</span> <span class="hidden">5 cannot be on either a dot or a whisper, so the only possible cell for it in r3 is r3c9.</span> <span class="hidden">The remaining dots in r3 must separate 3/6 and 4/8 pairs, but </span><span class="hidden">the inner two dotted cells are on a whisper line with each other, and of 3/4/6/8, only 3 and 8 are at least 5 apart.</span> <span class="hidden">The outer two dotted cells are the 4/6, but if r3c7 were 6, r3c8 would have to be 1.</span> This should finish this row and unlock the new rule.

    <p>Alright, now you know what that eye means: it's a SCRY-PEEPER. Go ahead and read the details of the rule in the puzzle description; there's an important clarification for how the rule works on the world map. And you can test your understanding by counting the visible cells in r3: the eye can see the 1, 2, 7, 8, and 9, for a total of 5, exactly as the clue says. In variant sudoku, this is generally called a skyscraper rule.

    <p>What about that other eye? <span class="hidden">6 seems like a lot of cells.</span> <span class="hidden">What would happen if r6c1 were 9? or 7?</span> <span class="hidden">The general math for this is, if an eye can see <i>E</i> cells, the <i>K</i>th cell in that row or column can't be more than 9 - E + K. But you don't really need to memorize that; you can just puzzle it out.</span> <span class="hidden">r6c1 can't be more than 4 because the eye must see 5 more cells in addition to it. Since it can't be 1, 2, or 4, it must be 3.</span>

    <p><span class="hidden">7 also seems like a lot of cells. Where can the 9 be in c5?</span> <span class="hidden">It must be in r7 at the earliest. But if it were in r7, </span><span class="hidden">it wouldn't be possible to see the cell in r6, because it would be at most 4, and there are 5 cells before it in the column. So the eye would only be able to see at most 6 cells.</span> <span class="hidden">That means the 4 cannot be on the whisper segment in this column.</span> <span class="hidden">What digits can be in first two cells?</span> <span class="hidden">r1c5 cannot be more than 3, so it must be 1/2. r2c5 must be 1/2/4.</span> <span class="hidden">If they were both 1/2, there wouldn't be any low digit left that could be on the whisper; so r2c5 must be 4.</span> <span class="hidden">This means the 3 isn't visible, and the 1/2 on the whisper line can't be visible. So every other cell must be visible.</span> <span class="hidden">That means that they must be filled with digits in ascending order in the column! r1c5 can still be either 1 or 2, but r4c5 must be 5, r5c5 must be 6, the high digit on the whisper must be 7, r8c5 must be 8, and r9c5 must be 9.</span> <span class="hidden">Sudoku puts a 7 in r7c1, so the 7 in c5 must be in r6c5.</span>

    <p>Back to r6. <span class="hidden">This 7 is a fairly tight constraint.</span> <span class="hidden">r6c4 cannot be greater than 7 without breaking the eye, and it cannot be 3, 4, 5, or 6 by sudoku, so it must be 1/2.</span> <span class="hidden">Since r6c6 must also be 1/2 because of the whisper line, r6c3 is very constrained: it cannot be 1/2/3/4/7 because they are already placed in r6, it cannot be 5 because that is in c3 in b7, and it cannot be 8/9 because of the eye. Therefore, it must be 6.</span> <span class="hidden">So the eye can see at least the 3, 4, 6, and 7, and it must see two more, which must be the 8 and 9.</span> <span class="hidden">If the 9 were in r6c7, the eye would only see 5 cells. So it must be in r6c9.</span> Note that you can ignore this clue now: no matter how you fill the remaining cells, the eye will see the 8 and therefore see 6 cells. Note that placing this digit reveals some clues in the new grid. Don't try to use them yet; 

    <p><span class="hidden">Where is the 8 in c8?</span> <span class="hidden">It cannot be lower than r5, which means the 8 in r6 can only be in r6c7.</span> <span class="hidden">Does the 5 in r6c8 onstrain the eye in c8?</span> <span class="hidden">It does: it cannot see both r5c8 and r4c8 anymore. The only possibility would be if the three cells in this box were 5/6/7, and that is impossible because of the 6 in r5c5.</span> <span class="hidden">But there are only five other cells before the 9. The eye must see all four cells in rows 6-9 and one of the cells in row 4-5.</span> <span class="hidden">To be visible over the 5 in r6c8, one of those last two cells must be 6/7.</span>

    <p>The eye in c7 <span class="hidden">can see the 8 in r6c7 and the 9 beneath it. There are only five cells above the 8, and it must see exactly four of them.</span> <span class="hidden">But you've already placed two digits from 5/6/7 in b6, which means one of r4c7 or r5c7 must be less than 4.</span> <span class="hidden">So the other three cells must be visible, which means the first two cells must be 1 and 2 in that order.</span> A short amount of sudoku later, and you'll find the third boss cell.

<h2>Chapter 13. Skysitter (Battlements boss)</h2>

    <p>This puzzle is quite fun. There are quite a few clues here, and it can be a little intimidating to break in. The opposing eyes are an important constraint, since the numbers are very small. The arrows are also a powerful restriction; and of course there are also some black dots.

    <p>Begin with the place where these all interact most strongly. <span class="hidden">In both b1 and b7, there is a three-cell arrow at the start of a row observed by an eye with a count of 2.</span> <span class="hidden">An eye always sees the 9, but these arrows cannot have a digit greater than 6. Therefore the eye can see only the first cell in the row and the 9, wherever it appears. The first cell must be the largest digit on the arrow.</span> <span class="hidden">Therefore it must be 3, 4, 5, or 6; but it cannot be 5 because it is also on a black dot.</span> <span class="hidden">One of the two dots in c1 must be a 3/6 pair, and the other must be either 2/4 or 4/8, with the 4 sitting on the arrow.</span>
        
    <p>Now consider the arrows alone for a moment. <span class="hidden">There are five cells on the arrows in both b1 and b7.</span> <span class="hidden">The circles on the arrows must sum to at least 15, and so neither can be less than 6; but </span><span class="hidden">they also cannot sum to more than 18, and this means that at least the 1 and 2 must appear on the arrows.</span> <span class="hidden">The 1 and 2 in c1 must therefore be in b4: the 1 in r5c1, and the 2 on a dotted pair. Therefore the four dotted digits are 2/3/4/6.</span>

    <p><span class="hidden">So there are four options for the dotted cells in c1. Do all of them actually work?</span> <span class="hidden">Recall that the cell must be the largest digit on the arrow. If it is a 3, the other cells must be 1/2, and the circle must be 6.</span> <span class="hidden">But the 3 must be paired with a 6 for the black dot, which would be in the same row as the circle. Therefore the digits in c1 of the arrows must be 4/6, and the digits in b4 they are paired with are 2/3.</span> <span class="hidden">The other digits on the arrow with the 6 must be 1/2, and its circle must be 9. Therefore there is a 9 in either r4c4 or r6c4.</span> <span class="hidden">Where, then, can the 9 be in c6? Only in r2c6.</span> <span class="hidden">This means the 9 in r3 must be in b3.</span> <span class="hidden">There are therefore at least six cells to the left of the 9 in r3. If r3c1 is 4, at least one of these cells must have a digit higher than 4 and less than 9, making it visible to the eye. So r3c1 = 6.</span> <span class="hidden">Similarly, the 9 must be in r3c7, and the 7 and 8 must be in c8 and c9 &mdash; in that order, to satisfy the eye to the right.</span>
    
    <p><span class="hidden">Where can the 9 go in r7?</span> <span class="hidden">Because r7c1 = 4, the 9 in r7 cannot be further right than c5, which is also the furthest left it can appear. The cells between the 4 and 9 are 1/2/3 in some order.</span> <span class="hidden">The 1 must be on the arrow, or else the sum breaks.</span> <span class="hidden">If r8c1 = 7, then its arrow cells must be 2/5; but r2c1 = 8, and its arrow cells must be 3/5, and there is nowhere for 5 in c1.</span>

    <p>It's finally time to consider some of the other arrows. <span class="hidden">r7c6 must be 5/6/7/8.</span> <span class="hidden">It cannot be 8, so the 8 in r7 must be in b9.</span> <span class="hidden">The least the arrow-sum can be is 7, with a 5 and two 1s. But it cannot be 7 or 8 by sudoku, so it must be 9.</span> <span class="hidden">The other cells on the arrow cannot sum to more than 4, so they must individually be 3 or less.</span> <span class="hidden">If r8c7 = 3, it must be paired with 6, which forces a 6 onto the arrow and makes the sum at least 10. So it is 1/2.</span>

    <p><span class="hidden">The arrow starting in r1c8 is pretty constrained.</span> <span class="hidden">r1c8 cannot be greater than 6.</span> <span class="hidden">r3c6 cannot be less than 3, so the other digits on this arrow cannot sum to more than 3. Therefore they are both 1 or 2.</span> <span class="hidden">At least one of them must be 1, so r6c5 and r8c7 cannot both be 1; thus, r7c6 cannot be 7.</span> <span class="hidden">By the same token, though, they cannot both be 1, because then r6c5 and r8c7 would have to be 3 and 2, respectively.</span> <span class="hidden">Therefore they sum to 3, r3c6 = 3, and r1c8 = 6.</span>

    <p><span class="hidden">Where is 8 in b6?</span> <span class="hidden">It cannot be on the arrows, because the circle cannot be 9. Therefore it is in r5.</span> <span class="hidden">r5c6 must be at least 5, but it cannot be 8 or 9.</span> <span class="hidden">It cannot be 5 because neither arrow can be a 2/3 pair.</span> <span class="hidden">If it is 6, the bottom arrow is 1/5 and the top arrow is 2/4. But a combination of constraints forces r8c7 = 1, and therefore r8c8 = 2, which makes the 2 impossible to place on the top arrow.</span> <span class="hidden">Hence r5c6 = 7.</span> <span class="hidden">The 1/2 pair in c7 means that r4c7 and r6c7 are both at least 3.</span> <span class="hidden">r4c8 and r6c8 are thus both no more than 4.</span> <span class="hidden">r2c8 and r8c8 are also no more than 4, so these four cells are collectively 1/2/3/4. But the 3 can only be in r6c8.</span> This places digits in a number of other cells.

    <p><span class="hidden">Think about the other arrow in b7.</span> <span class="hidden">r8c3 must be at least 5, so r9c2 must be 4 or less; it can only be 2.</span> <span class="hidden">r2c3 = 3 because there is no way to make this arrow sum without a 3.</span>

    <p><span class="hidden">Pay attention to the eyes now.</span> <span class="hidden">In c6, if the bottom eye can see the 6, it can also see the 7 and the 9.</span> <span class="hidden">This means it will see four cells. Therefore the 6 must be blocked, which it can only be by the 8.</span> <span class="hidden">The 8 cannot be in r9c6 or else the eye will see only two cells, so r8c6 = 8.</span>

    <p>The rest of the puzzle can be solved with ordinary sudoku logic. The digit to place in the boss cell is <span class="hidden">2</span>.

<h2>Chapter 14. Battlements (grid 4)</h2>

    <p>Placing the 2 reveals a number of new eyes throughout the world map. You're not quite done with this grid yet, though. The boss digit exposes a number of opportunities for sudoku: <span class="hidden">one line of reasoning leads to r2c4 = 1</span>, <span class="hidden">there is only one possible cell for 6 in b8</span>, and <span class="hidden">there is only one possible cell for 8 in b9</span>. And there's one that's <i>very</i> easy to miss: <span class="hidden">r1c1 = 4 in the factory actually sees r7c9 in this grid! That puts the 4 in r7 in r7c8</span>. As a result, <span class="hidden">r7c9 can only be 3/6, and since </span><span class="hidden">r1c9 and r2c9 can only be 3/6/7 and 6/7, respectively, </span><span class="hidden">the other three cells in c9 must be 1/2/4</span>.
        
    <p>This should unlock a flurry of sudoku, but you will not be able to finish this grid yet. You should have 5 of the 7 cells bordering the Hall of Illusions filled, with others being a pair: <span class="hidden">3, 7, 5, 1/4, 1/4, 9, 6</span>. Do not fill it any other cells in the Hall of Illusions yet; you have a sense of forboding about it.

    <p>Go look at the new eyes. Most of them don't appear immediately useful, but one of them deserves a second look.

<h2>Chapter 15. Quarters (grid 2)</h2>

    <p><span class="hidden">The new eye here restricts r9c1 quite a bit:</span> <span class="hidden">it cannot be greater than 6, so the 7 and 9 must now go in r7c1 and r8c1 (in that order, because of r8c8).</span> <span class="hidden">The whisper line leading into r8c5 forces it to be at least 7, but now it cannot be 7 or 9.</span> This triggers some useful sudoku, most importantly that <span class="hidden">r7c7 = 8</span>. <span class="hidden">The 8 in r9 must be in b7, but it cannot be in r9c2 without limiting the eye to only seeing three cells.</span> And this shows us our fourth boss cell!
        
    <p>You've now finally filled the border with the Courtyard, but we still can't finish that grid. Time for the boss.

<h2>Chapter 16. Keymaster (Quarters boss)</h2>

    <p>Be sure to read the rules carefully. The clues outside the grid here are <i>not</i> eyes; they are "numbered room" clues. The digit in the door must go into the <i>n</i>th cell away in the same row or column, where <i>n</i> is the digit in the immediately adjacent cell (its "index cell"). This can be hard to grasp from a description, so it might be more helpful to see a few examples of valid placements according to this rule alone:

    <table class="grid"><tr><td class="sr tan">5</td><td>3</td><td></td><td class="r">5</td><td></td><td></td><td class="r"></td><td></td><td></td><td></td></tr></table><br>
    <table class="grid"><tr><td class="sr tan">5</td><td>5</td><td></td><td class="r"></td><td></td><td>5</td><td class="r"></td><td></td><td></td><td></td></tr></table><br>
    <table class="grid"><tr><td class="sr tan">5</td><td>8</td><td></td><td class="r"></td><td></td><td></td><td class="r"></td><td></td><td>5</td><td></td></tr></table>

    <p>The second of these, of course, violates the standard rules of sudoku and so wouldn't be legal in the actual puzzle.

    <p>The rules in the puzzle description aren't completely clear about this, but in numbered room sudoku, "<i>n</i>th" is always a <i>relative</i> index, i.e. the cell <i>n</i> cells away from the clue (as opposed to an absolute index that always starts from the top or left side, like I've been using with "r6" or "c7"). For example, these are legal placements for clues on the right side:

    <table class="grid"><tr><td></td><td></td><td class="r"></td><td></td><td></td><td class="r"></td><td>5</td><td></td><td>3</td><td class="sl tan">5</td></tr></table><br>
    <table class="grid"><tr><td></td><td></td><td class="r"></td><td></td><td>5</td><td class="r"></td><td></td><td></td><td>5</td><td class="sl tan">5</td></tr></table><br>
    <table class="grid"><tr><td></td><td>5</td><td class="r"></td><td></td><td></td><td class="r"></td><td></td><td></td><td>8</td><td class="sl tan">5</td></tr></table>

    <p>Again, the second example violates the standard sudoku rules and wouldn't be legal in the actual puzzle.

    <p>There's an interesting property that's generally true for numbered room clues at opposite ends of the same row or column: <span class="hidden">when the index cells sum to 10, the clues end up talking about the same cell. If the digits in the clues are different, this has to be impossible. (If the digits in the clues are the same, this is <i>required</i>, but that doesn't happen in this puzzle.)</span>

    <p>Anyway, the triple clues are the natural places to start. <span class="hidden">The three 2 doors on the top side of the grid are aligned with the box borders.</span> <span class="hidden">This means that, if one of them goes in b8, the other two cannot. There are three clues and three possible boxes, thus one clue per box.</span> <span class="hidden">As such, one of the digits in r1 in b2 is 1/2/3, one is 4/5/6, and one is 7/8/9.</span> <span class="hidden">The index cells for these three clues are also a cage with sum 18, which they can only reach if they contain 3, 6, and 9.</span> <span class="hidden">Accordingly, there must be a 2 in r3 in b2, in r6 in b5, and in r9 in b8.</span> <span class="hidden">Since the 2 in r6 is in b5, r6c9 must be 4/5/6 because of the 2 door.</span>

    <p><span class="hidden">As for the three 5 doors on the left side of the grid, </span><span class="hidden">the same logic applies except that there's a single degree of freedom: it's 3/6/9 except that one of the digits is one less, i.e. 2/5/8. This ends up being very open-ended in terms of marking the grid, and it's not worthwhile; but it'll be important, and you'll need to keep it in mind.</span>

    <p><span class="hidden">Consider the 31 cage.</span> <span class="hidden">The 2 in b5 must be in r6, which puts it in the cage.</span> <span class="hidden">So the other 4 cells in the cage must sum to 29, making them 5/7/8/9.</span> <span class="hidden">You know that the 5 in this box is not in r6c4 because this would make the 17 sum in c1 impossible. It also cannot be in r6c5 because then 5 would also have to be in r6c1. So you know that it must be in c6, and therefore one of the digits in the cage in c1 is 6.</span> <span class="hidden">r9c6 must be 4/5/6 because of the door, but it cannot be 5 by sudoku: the 5 in b5 is already in c6.</span> <span class="hidden">This also means that r5c6 is not 5, and so r5c1 is not 6.</span> <span class="hidden">Finally, since neither possible digit in r9c6 is 2, r1c6 cannot be 9.</span>

    <p><span class="hidden">Can r1c6 be narrowed further?</span> <span class="hidden">If it were 6, r9c6 would have to be 4. This creates that situation I mentioned above: the clue at the top of the column would make r6c6 = 2, but the clue at the bottom would make r6c6 = 5. So this is impossible, and r1c6 = 3.</span> <span class="hidden">Therefore r6c9 must be 5/6.</span> <span class="hidden">This means that r6c1 can no longer be 6, because this would make r6c6 = 5, and r6c9 would be impossible to fill. So r4c1 = 6.</span> <span class="hidden">By putting a 5 in r4c6, this also puts a 6 in r9c6.</span> <span class="hidden">This puts a 6 in c3 in b7, since it cannot go in the 12 cage; and that puts a 6 in the 9 cage in b1, making the sum 1/2/6. (There is also a much more interesting way to prove this directly with the 3 clues.)</span>

    <p>Consider the 15 cage in b8. <span class="hidden">To sum to 15 in four distinct digits without 1 requires 2/3/4/6; but r9c6 is 6, so this is impossible, and there must be a 1 in the cage.</span> <span class="hidden">The 1 in c6 can now only be in r2c6, and the 4 must be in b8. The digits in the 9 cage can be placed by sudoku.</span>
    
    <p><span class="hidden">Where is the 3 in c2? The index cell, r1c2, can only be 4/5/7/8.</span> <span class="hidden">One of the index cells in b4 must be either 2 or 3 to make the cage sum work.</span> <span class="hidden">If r1c2 is 4 or 5, the index cells in b4 can no longer be 3, and one of them must be 2. But only r5c1 can be 2, and this would make r5c2 = 5.</span> <span class="hidden">So if r1c2 = 5, there's an immediate contradiction: r5c2 must be both 3 and 5.</span> <span class="hidden">And if r1c2 = 4, r4c2 = 3; but this means the 12 cage in b7 sees all three of 3, 4, and 5, making it impossible to fill.</span> <span class="hidden">So r1c2 must be 7/8, putting the 3 into the 12 cage either way and making it a 3/9 pair.</span>

    <p>Now consider the 15 cage in b6. <span class="hidden">By sudoku, there is no 6 in this cage.</span> <span class="hidden">Again, to sum to 15 in four distinct digits without 1 requires 2/3/4/6; since this is not possible, there must be a 1 in the cage.</span> <span class="hidden">Therefore the only place for a 1 in r6 is r6c3.</span> <span class="hidden">As a result, r6c1 cannot be 3; it must be 8/9, and r5c1 must be 2/3.</span> <span class="hidden">This creates a 2/7/8/9 set in r6.</span> <span class="hidden">The remaining digits are 3/4/5/6; of these, r6c2 can only be 4. The other three must go in b6.</span> <span class="hidden">There is only one way to sum 4 distinct to 15 without 3/5/6: 1/2/4/8. The other two cells in b6 must be a 7/9 pair.</span>

    <p><span class="hidden">What digits remain to be placed in c2?</span> <span class="hidden">The 2 cannot be in r1c2 or r9c2, so it must go in b4.</span> <span class="hidden">This forces r5c1 = 3 and r6c1 = 8, as well as the corresponding 5s.</span> <span class="hidden">There's a lot of sudoku to do now; you should be able to finish b4, as well as b6 outside of the cage.</span>

    <p><span class="hidden">Now we can look at the 3 in r2 again.</span> <span class="hidden">It must be 7/8/9, but it cannot be 7/8 because r2c7 sees both 3 and 9.</span> <span class="hidden">So it must be 9, which sets r2c9 = 3.</span>

    <p><span class="hidden">Consider the digits 3, 6, and 9. They've already been placed, or at least heavily constrained, in most of the boxes, rows, and columns.</span> <span class="hidden">One of the exceptions is c8, about which you seem to know almost nothing.</span> <span class="hidden">3/6/9 cannot be in r1c8 or r2c8, or in b6. This leaves only four cells for three digits.</span> <span class="hidden">At least one of 3/6/9 must be in the 14 cage in b9.</span>

    <p>It's finally time to look at the last door. <span class="hidden">The 8 in r8 cannot go in r8c1 or r8c6 by sudoku.</span> <span class="hidden">It cannot go in the 15 cage in b8 because the cage would have to be 1/2/4/8, and the 4 is known to be in c9 in this box.</span> <span class="hidden">It cannot go in r8c7 because r8c9 would have to be 3.</span> <span class="hidden">It cannot go in r8c9 because r8c9 would also have to be 1.</span> <span class="hidden">If r8c8 = 8, r8c9 = 2, so r9c8 = 4 to make the cage work; but then it becomes impossible to place all of 3/6/9 in c8.</span> <span class="hidden">Therefore r8c3 = 8, making r8c9 = 7.</span>
    
    <p>The remainder of the puzzle is straightforward. The digit to place in the boss cell is <span class="hidden">1</span>.

<h2>Chapter 17. Quarters (grid 2)</h2>

    <p>You just learned two rules, one of which is tied to a quest.

    <p>The first rule is CODEX, which you're going to need when you start the Library grid. You won't need this quite yet, but we'll come back to it very soon.
    
    <p>The second rule is collectible coins. You also don't need this yet, but you've been seeing these all over, so you might as well read about it now:
    <ul compact>
        <li>First, read the main rule description in the puzzle description box. Okay, so if you ever put, say, a 4 in a coin cell, that means there are exactly 4 coin cells in the entire map with a 4.
        <li>Second, click on the cell with the red exclamation mark beneath the Quarters grid. The puzzle description box will tell you that there's exactly 45 coin cells on the map. That means the map isn't missing any coin digits.
        <li>Finally, scroll the map to the bottom right corner to find the Quest Progress box. You probably forgot this was there. You'll see that you've solved four bosses and one of the grids on the map, and there's a space to record how many coins you've found for each digit. I would not recommend actually using this; it's extremely easy to lose track of which coins you've already counted, and you'll find yourself recounting them over and over again. A much better way to keep track of this is a document like this, maybe on a piece of paper:

            <table class="worksheet">
                <tr><th>Grid</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th></tr>
                <tr><td>1</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>X</td></tr>
                <tr><td>2</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>X</td><td></td></tr>
                <tr><td>3</td><td></td><td></td><td>X</td><td></td><td></td><td></td><td></td><td>X</td><td>X</td></tr>
            </table>

            <p>This is much easier to audit as you go. You only need space for about ten rows, so it's not going to be difficult to manage. I'll tell you now that most of the grids have exactly 3 coins on them, always of different values, and they're never in the border areas. (You don't need to <i>assume</i> that, but the fact that it turns out to be true makes this a really nice way to do the bookkeeping.)
    </ul>

    <p>Filling the boss cell lets you finish the Quarters grid; this is generally straightforward. <span class="hidden">1 is forced into r6c3, which makes r5c4 = 7.</span> <span class="hidden">The only possible cell for 7 in c6 is r9c6; the whisper line puts a 2 in r8c6.</span> Sudoku will complete the grid except for a few pairs that can be resolved by <span class="hidden">remembering the eye in r9, which can only be satisfied by putting the 4 in r9c1</span>.

    <p>Taking a look around before you move on, it's interesting that you've finished this area with so much fog still uncleared. Perhaps there's something hidden under the fog still. There's also a pair of whisper lines leading off the bottom of the grid that clearly cannot be satisfied by any digit, and a mysterious red line leading off to the right that you're starting to see pop up elsewhere. Very odd. Anyway, off to the library.

<h2>Chapter 18. Library (grid 5)</h2>

    <p>Time to read up about the CODEX rule. This is a column-indexing rule, which may be new to you unless you play a lot of variant sudoku (or even if you do; indexing rules are often different from puzzle to puzzle, as in fact we're seeing right now). Much like the doors from the Keymaster boss you just finished, the idea is that you are placing a fixed digit according to the digit in a specific cell. Unlike that rule, however, the digit you are placing is the column number of a cell with the book emoji in it (&#x1f4d6;), and the digit in that cell is the column number where it goes. Columns are numbered starting from the left side, just like I've been writing with e.g. "c8". It might help to look at some legal placements:

    <table class="grid"><tr><td>4</td><td></td><td class="r"></td><td class="blue">1</td><td></td><td class="r"></td><td></td><td></td><td></td></tr></table><br>
    <table class="grid"><tr><td></td><td></td><td class="r"></td><td class="blue">7</td><td></td><td class="r"></td><td>4</td><td></td><td></td></tr></table><br>
    <table class="grid"><tr><td></td><td></td><td class="r"></td><td class="blue">4</td><td></td><td class="r"></td><td></td><td></td><td></td></tr></table>

    <p>Unlike the numbered room rule, where certain digits in the index cell can just never work for certain clues, these clues never restrict cells by themselves: any cell in the row could be a legal place to put the column number of the clue cell. It's only in interaction with other clues, or with digits you've already placed, that the rule comes into its own.

    <p>Right, so, let's get started. You can see three codex clues. <span class="hidden">They are in c2, so the digit in the clue is the column number of the 2 in that row.</span> <span>Since r6c1 = 2, r6c2 = 1.</span> That reveals more of the grid, but there's something else to notice first. <span class="hidden">Just like you saw with the Keymaster, these clues are aligned within a single row of boxes.</span> <span class="hidden">Since they are placing the 2, they must be placing it in the different boxes.</span> <span class="hidden">The placement in b5 cannot be in c4, and the placement in b6 cannot be in c7, so you've narrowed the 2 down to four cells in each box.</span>

    <p>Now you can check out the clues in b5. <span class="hidden">The arrows use a lot of cells in this box.</span> <span class="hidden">The least that a 5-cell set can sum to is 15.</span> <span class="hidden">The arrows also require a cell outside the box, so their circles must sum even higher than that.</span> <span class="hidden">They must be at least 16, and r5c7 cannot be greater than 2.</span> <span class="hidden">It cannot be 2 because that would require the clue in r5c2 to be 7, so it is 1.</span> <span class="hidden">r4c5 and r4c6 cannot be 2 and still sum to at least 16.</span> <span class="hidden">r5c2 must be 5/6, and r4c2 must be 8/9.</span> <span class="hidden">r4c5 and r4c6 must contain a 9, so r4c2 = 8.</span> <span class="hidden">The arrows sum to 16, so the arrow cells in b5 sum to 15.</span> <span class="hidden">By the codex clues, r4c8 = 2, and the other two cells in this row and box are 5/6.</span> <span class="hidden">You can place the 1/3 in this row by sudoku.</span>

    <p>Both of these arrows have 1s on them. <span class="hidden">The other cells are a 2/3/4/5 set; the 7-sum arrow must be 1/2/4, so the 9-sum arrow must be 1/3/5.</span> <span class="hidden">Since the 2 must be in r5, the 4 must be in either r6c5 or r6c6.</span> <span class="hidden">Since these cells are both codex clues, the digit in r6c4 must be 5/6.</span> <span class="hidden">You know that 5 is on the arrows in this box, so it must be 6, and therefore r6c6 = 4.</span> <span class="hidden">This also determines the 7, 9, 2, and 6 in this box.</span> <span class="hidden">Placing the 7 and 9 finishes r4 via the codex clues.</span> <span class="hidden">The remaining codex clues here are 3/5, but r5c6 = 5 would force r5c5 = 6 when we already know it is 2.</span> <span class="hidden">The 2 in r5 is in r5c5, so r5c2 = 5.</span>

    <p>The puzzle suggests looking at these new cells in b8, and so do I. <span class="hidden">Again, you have two codex cells in the same column and the same row of boxes, so they must be cells in different boxes.</span> <span class="hidden">They also have the same high/low polarity because of the whisper line.</span> <span class="hidden">If they were 1/2/3/4, one of them would have to be a 4 or else they'd be in the same box, but r6c6 = 4 already. Therefore they are 6/7/8/9, and one of them must be a 6.</span> <span class="hidden">r8c7 cannot be 1, so r9c6 cannot be 6; r8c6 = 6 (indexing itself, which is fine), and r9c5 = 1.</span> <span class="hidden">r9c1 means that the only remaining value for r9c6 is 7, which sets r8c7 = 2.</span> <span class="hidden">And r9c7 = 6 aaaaaaaaaaaaaaaaahhhhhhhhhhhhhhhhhh</span>

<h2>Chapter 19. Maintenance (grid 6)</h2>

    <p>Well, dust yourself off. You're in a new grid, but there's also a new rule. Go ahead and read about it in the puzzle description box. <span class="hidden">Every cell has a digit &mdash; that must mean outside of grids, too.</span> <span class="hidden">There are cells you can't see, but surely the line can't have two different endpoints in the same cell. So this line between the library and the maintenance must be continuous, and you can see both ends of it. Go ahead and fill it in as best you can.</span> <span class="hidden">You should have everything except a pair of cells, the third from each end.</span> <span class="hidden">And you have one cell in the maintenance grid, it's a 6, and it's next to a black dot. r9c8 = 3.</span> <span class="hidden">r9c7 is 8/9, but it's also on a black dot, so it must be 8.</span> <span class="hidden">r9c6 = 4 (by the dot).</span> <span class="hidden">r9c5 = 9 (by the whisper).</span> <span class="hidden">Uh oh.</span>

<h2>Chapter 20. Prism Break (Maintenance boss)</h2>

    <p>This is a really fun and unique puzzle.
        
    <p>The first rule to learn here is the shading. You're going to have to shade the entire grid, making every cell either a cave or a wall. The cave cells all have to have some orthogonal path to each other. (Orthogonal means passing through the edges between adjacent cells, not through diagonals.) They form one unified group. The wall cells all have to have some orthogonal path to one (or more) of the edges of the grid, but they can be in multiple groups. So this would be a valid shading of a grid:

    <table class="grid">
        <tr><td class="wall"></td><td class="cave"></td><td class="cave"></td><td class="cave"></td><td class="wall"></td><td class="wall"></td><td class="cave"></td></tr>
        <tr><td class="wall"></td><td class="wall"></td><td class="cave"></td><td class="cave"></td><td class="wall"></td><td class="cave"></td><td class="cave"></td></tr>
        <tr><td class="cave"></td><td class="wall"></td><td class="cave"></td><td class="cave"></td><td class="wall"></td><td class="wall"></td><td class="cave"></td></tr>
        <tr><td class="cave"></td><td class="cave"></td><td class="cave"></td><td class="wall"></td><td class="wall"></td><td class="cave"></td><td class="cave"></td></tr>
        <tr><td class="wall"></td><td class="cave"></td><td class="cave"></td><td class="cave"></td><td class="wall"></td><td class="cave"></td><td class="wall"></td></tr>
        <tr><td class="cave"></td><td class="cave"></td><td class="wall"></td><td class="cave"></td><td class="cave"></td><td class="cave"></td><td class="cave"></td></tr>
        <tr><td class="cave"></td><td class="wall"></td><td class="wall"></td><td class="wall"></td><td class="wall"></td><td class="wall"></td><td class="cave"></td></tr>
    </table>

    <p>Rules like this, with different shadings of orthogonally-connected cells, come with an extremely handy little theorem about every 2&times;2 portion of the grid:

    <table class="grid">
        <tr><td class="wall"></td><td class="cave"></td></tr>
        <tr><td class="cave"></td><td class="wall"></td></tr>
    </table>

    <p><span class="hidden">They can never have a checkerboard pattern like this. There must be an orthogonal path between the diagonally-opposite cave cells, but the wall cells must themselves be orthogonally connected to the edges of the grid, which the cave path cannot possibly get around. So if you ever see two cells of the same color across a diagonal from each other, you know at least one of the adjacent has the same color, too.</span>

    <p>I suggest using dark grey for wall cells and light grey for cave cells, because I think it looks nice on this puzzle. You might reasonably decide that the contrast isn't good enough, though, especially between the light-grey-and-pink and the default pink background.

    <p>The second rule is the akari rule. (This comes from a completely different kind of logic puzzle called <a href="https://en.wikipedia.org/wiki/Light_Up_(puzzle)">"light up" or <i>akari</i></a>.) Some of the cave cells are going to be "lanterns". Lanterns casts light in all four orthogonal directions, illuminating any cave cells. Light only travels in straight orthogonal lines, never travels along diagonals. Light is also blocked by wall cells and doesn't illuminate cells on the other side. The big constraint in akari is that no two lanterns are ever permitted to illuminate each other, so if two lanterns are in the same row or column, there must be at least one wall cell between them. Since lantern cells are always cave cells, there's a bit of a visual collision when it comes to marking them in the grid. I suggest marking lantern cells by coloring them yellow rather than the light grey of a cave. As long as the cave and lantern cells are both light colors and the walls are a dark color, you probably won't have trouble remembering that lantern cells are also cave cells. With that in mind, this would be a valid placement of lanterns in the grid above:

    <table class="grid">
        <tr><td class="wall"></td><td class="lamp"></td><td class="cave"></td><td class="cave"></td><td class="wall"></td><td class="wall"></td><td class="cave"></td></tr>
        <tr><td class="wall"></td><td class="wall"></td><td class="cave"></td><td class="lamp"></td><td class="wall"></td><td class="lamp"></td><td class="cave"></td></tr>
        <tr><td class="lamp"></td><td class="wall"></td><td class="cave"></td><td class="cave"></td><td class="wall"></td><td class="wall"></td><td class="cave"></td></tr>
        <tr><td class="cave"></td><td class="lamp"></td><td class="cave"></td><td class="wall"></td><td class="wall"></td><td class="cave"></td><td class="lamp"></td></tr>
        <tr><td class="wall"></td><td class="cave"></td><td class="lamp"></td><td class="cave"></td><td class="wall"></td><td class="lamp"></td><td class="wall"></td></tr>
        <tr><td class="cave"></td><td class="cave"></td><td class="wall"></td><td class="cave"></td><td class="lamp"></td><td class="cave"></td><td class="cave"></td></tr>
        <tr><td class="lamp"></td><td class="wall"></td><td class="wall"></td><td class="wall"></td><td class="wall"></td><td class="wall"></td><td class="lamp"></td></tr>
    </table>

    <p>Note that it's fine if two different lanterns see the same cell; it's only a problem if they see each other. There are many different possible valid placements of lanterns in this grid, at least according to the rules of akari alone.

    <p>The third rule, which is special to this puzzle, is that the digit in a lantern cell tells you how many cells it illuminates, including itself. With the placements above, the digits would have to be:

    <table class="grid">
        <tr><td class="wall"></td><td class="lamp">3</td><td class="cave"></td><td class="cave"></td><td class="wall"></td><td class="wall"></td><td class="cave"></td></tr>
        <tr><td class="wall"></td><td class="wall"></td><td class="cave"></td><td class="lamp">4</td><td class="wall"></td><td class="lamp">2</td><td class="cave"></td></tr>
        <tr><td class="lamp">2</td><td class="wall"></td><td class="cave"></td><td class="cave"></td><td class="wall"></td><td class="wall"></td><td class="cave"></td></tr>
        <tr><td class="cave"></td><td class="lamp">5</td><td class="cave"></td><td class="wall"></td><td class="wall"></td><td class="cave"></td><td class="lamp">5</td></tr>
        <tr><td class="wall"></td><td class="cave"></td><td class="lamp">7</td><td class="cave"></td><td class="wall"></td><td class="lamp">3</td><td class="wall"></td></tr>
        <tr><td class="cave"></td><td class="cave"></td><td class="wall"></td><td class="cave"></td><td class="lamp">4</td><td class="cave"></td><td class="cave"></td></tr>
        <tr><td class="lamp">2</td><td class="wall"></td><td class="wall"></td><td class="wall"></td><td class="wall"></td><td class="wall"></td><td class="lamp">2</td></tr>
    </table>

    <p>This, of course, interacts with the rules of sudoku, because it means you can never have two lanterns in the same row or column that illuminate the same number of cells. Our lantern placement violates that, so it would not, in fact, be a legal lantern placement under these rules combined. You can fix it by just moving the lantern in r7c1 to r6c1: all the cave cells are still illuminated, but now that lantern contains the digit 3 and doesn't violate sudoku.

    <p>The final rule is the cages. Cages in this puzzle are always in wall cells, and the digit in a cage is the number of lanterns in the orthogonally adjacent cells. So if there were a cage in r5c5 in my little example, it would have to be filled with 2. This will be a key rule for breaking into the puzzle.

    <p>Start by shading all of the cages as walls. Remember that all of these will have to connected to an edge of the puzzle. <span class="hidden">This means the digit in a cage can never be 4, because a lantern cell is always a cave cell, and a wall completely surrounded by cave cannot be connected to an edge. But of course it's fine for a cage that's sitting directly on an edge to be surrounded on all its other sides.</span>

    <p><span class="hidden">The key to breaking into this puzzle is placing lantern cells, which give you a lot of information.</span> <span class="hidden">The lantern cells that share a row or column are particularly constrained.</span> <span class="hidden">You have to place 6 lanterns around the cages in r9, in a total of 8 total cells.</span> <span class="hidden">The gaps between these lanterns are only two cells, and you can never place two lanterns in the same gap because they would illuminate each other.</span> <span class="hidden">So these two gaps must each contain a cell that does not contain a lantern.</span> <span class="hidden">Since there are 6 lanterns to place, the 4 cells that are not in the gaps must be lanterns, and the two gaps <i>must</i> contain a lantern.</span>

    <p>Recall that each lantern contains the number of cells that it illuminates. <span class="hidden">If r3c9 were a lantern, it could illuminate no more than 3 cells, but 1/2/3 are impossible by sudoku.</span> <span class="hidden">Therefore r4c9 cannot be 3, and the 3 must be r7c9.</span> <span class="hidden">This puts a lantern into r6c9, which means r5c9 cannot have one, so r4c9 = 1 and r1c9 = 2.</span> Be sure you don't try to mark cells that don't have lanterns specifically as cave or wall cells! You don't necessarily know that; all you know is that it isn't a lantern. I found that I could get by without marking non-lantern deductions, but you might consider finding another way to mark them if you want.

    <p>There's another place that's restricted in its illumination. <span class="hidden">r8c9 has a lantern, and it can illuminate at most four cells, but it cannot be 1/2/3 by sudoku. Therefore it is 4.</span> Mark the cells it illuminates as cave. <span class="hidden">r8c6 cannot be 3 anymore.</span> <span class="hidden">It must be adjacent to at least one lantern, though.</span> <span class="hidden">If r8c5 = 3, both of r8c6's remaining adjacent cells would be adjacent to lanterns.</span> <span class="hidden">Therefore r8c1 = 3.</span>

    <p>Don't forget the theorem I explained above. <span class="hidden">r2c8, r6c8, r7c2, and r9c2 all must be cave cells because they would make the cave disconnected if they were walls. They cannot be lanterns, so you can mark them as ordinary cave.</span> <span class="hidden">This brings the lanterns in c8 perilously close to illuminating one another; r3c8 and r5c8 must be walls.</span> <span class="hidden">Therefore r3c9 and r5c9 must also be walls by the checkerboard theorem.</span> <span class="hidden">This makes r4c6 a cave cell.</span>

    <p>These new cave cells make illumination tricky again. <span class="hidden">You now have two lanterns in c9 that must have a digit of at least 5 but only illuminate in one direction.</span> <span class="hidden">The digit in r3c7 can only be 1 now: it is surrounded by ordinary cave on two sides and a wall on a third. r3c6 is a lantern.</span> <span class="hidden">r4c6 is ordinary cave.</span>

    <p>You haven't done much with the lanterns in c8 yet. <span class="hidden">r1c8 cannot be 2, so it must illuminate at least one cell to its left; that's all you can do with this for now.</span> <span class="hidden">r7c8 cannot be 3/4, so it must also illuminate at least one cell to its left.</span> <span class="hidden">That means r7c6 cannot be a lantern.</span> <span class="hidden">r8c6 = 1 and r8c5 = 2. r9c6, r7c5, and r8c4 are lanterns.</span> <span class="hidden">r7c6 and r8c3 must be walls to prevent lanterns from illuminating each other.</span> <span class="hidden">r7c4 must be a cave by the checkerboard theorem, so r7c3 must also be a wall.</span> <span class="hidden">r9c5 must be a wall or the cages will not be connected to an edge.</span> <span class="hidden">The illumination of r7c8 now cannot be more than 5, so it is 5.</span>
    
    <p>You just added a bunch of new lanterns. <span class="hidden">The lantern in r9c6 must be at least 3 by sudoku, so it must illuminate at least r9c7 and r9c8, but that means it also illuminates r9c9; it is 4.</span> <span class="hidden">r7c5 must be at least six, so r5c5, r4c4, and r3c5 must be cave. You already know that r2c5 is cave, so r7c5 is 8/9.</span> <span class="hidden">Making r4c5 cave means that r4c8 is at least 4, but it cannot be 5 by sudoku, and it cannot be more than 5 because of the wall in r4c3. So it is 4 and r4c4 is a wall.</span> <span class="hidden">r8c4 must be at least 5 by sudoku, but it can only possibly illuminate 5 cells now, so it is five and all of those cells are cave.</span>
        
    <p>Time to look at the left side of the puzzle for a chanege. <span class="hidden">If r9c3 were cave, r9c1 would illuminate 4, which breaks sudoku; therefore r9c3 is wall and r9c1 = 2.</span> <span class="hidden">r8c2 must be at least 6, so you can shade cave up to at least r3c2.</span> <span class="hidden">This means r4c3 can no longer be 3, so it is 2, with lanterns above and below.</span> <span class="hidden">The only remaining paths that can connect r4c3 to an edge of the puzzle require r3c4 and r2c4 to be walls.</span> <span class="hidden">This forces r2c9 = 5.</span>
        
    <p><span class="hidden">How constrained is c1 now?</span> <span class="hidden">r7c1 must be at least 4, so r6c1 and r5c1 must be cave.</span> <span class="hidden">If r2c1 were a lantern, it would have to be at least 4 by sudoku, but there would also need to be a wall between it and r7c1.</span> <span class="hidden">The most it could be is 4, but then it would make r7c1 = 4, which would break sudoku. So the lantern is in r1c2.</span>
    
    <p>That creates interesting constraints in r1. <span class="hidden">r3c2 must be cave by the checkerboard theorem, so r2c2 must be wall to prevent the lanterns from illuminating each other.</span> <span class="hidden">r1c2's illumination must therefore run strictly to the right, and it must be at least 3.</span> <span class="hidden">So the only way of connecting the wall in r2c4 to an edge of the puzzle is if r2c3 and r2c1 are also wall.</span> <span class="hidden">That means r1c5 must be cave, or else that stretch of cave will be disconnected. r1c6 must then be wall to separate the lanterns.</span> <span class="hidden">r1c2 = 4. r1c8 = 3.</span>
    
    <p>You're very close to finishing the shading. <span class="hidden">r3c1 must be cave so that r3c3 can illuminate more than 2; r3c3 = 3.</span> <span class="hidden">r3c6 must be at least 6, which is the most it can be; r5c6 is cave.</span> <span class="hidden">r7c5 is now known to be 8. r8c2 = 7.</span> <span class="hidden">If r5c3 = 8, r6c9 is also forced to be 9, and there is no remaining digit that can be placed in r5c9.</span> This still doesn't finish the shading, but the rest of the grid can be solved with sudoku, and you'll shade the last cells along the way.

    <p>The digit for the boss cell is <span class="hidden">5</span>.

<h2>Chapter 21. Maintenance (grid 6)</h2>

    <p>You've unlocked the AKARI LANTERN rule. This is completely useless; there are no akari lanterns on the world map, and in fact the rules box doesn't even bother to list it. But you've also unlocked the DARK rule, and the rules box does cover that; go and read about it in the puzzle description box. Unlike the earlier rules, this one doesn't build out of the rules of the puzzle you just solved; it's just its own new thing. It's a little weird, don't worry about it. Anyway, the rule is just that dark-shaded cells have a lower value than all of the non-dark cells they're adjacent to; that's going to be the key to finishing the maintenance grid. The rule also mentions that fog doesn't clear easily around dark cells, but you can't control the fog clearing anyway, so it's not anything new.
        
    <p>I used to play a lot of greater-than sudoku puzzles, and this rule has a lot of the same characteristics. Generally, you tackle rules like this by thinking about how they rule out digits, keeping in mind that they give you the most information about the smallest and biggest digits that you haven't placed yet. <span class="hidden">What digits remain to be placed in r9?</span> <span class="hidden">The 1 cannot go in r9c2 or r9c4 without making it impossible to place a digit in r9c3.</span> <span class="hidden">The 1 in b8 must go in r7c4 or r7c6 by the same logic.</span> <span class="hidden">So the 1 in b9 must be in r8, and that means it must be in r8c8.</span> <span class="hidden">The 2 in b9 cannot in r8 because both of the remaining cells are greater than two other cells in the box.</span>

    <p><span class="hidden">That puts some interesting constraints on the arrow in b7.</span> <span class="hidden">It has at least three cells, so these two cells cannot sum to more than 8.</span> <span class="hidden">These two must be at least 3, but they cannot be 5 because it is in r9 in this box, so they must be a 3/4 pair, and </span><span class="hidden">the dark clue forces the 4 into r7c2.</span>

    <p>The dark cells in b8 are getting a little tight now. <span class="hidden">What digits are actually possible?</span> <span class="hidden">Neither r7c4 or r7c6 can be greater than 6 because they are less than two cells in the box, neither of which is 9. But they also cannot be 2/3/4/5, so they must be 1/6.</span> <span class="hidden">Because one of them is 6, its adjacent cells must be 7/8.</span> <span class="hidden">So r9c4 can now only be 2, which places r9c3 = 1.</span> <span class="hidden">Where is the 2 in b7? Only r8c1 is possible.</span> <span class="hidden">The arrow cells in b4 are either 1/8 or 2/9.</span>
        
    <p>This next leap is quite good. <span class="hidden">How do the constraints in b8 affect r6?</span> <span class="hidden">If r7c4 = 1, r6c4 must be at least 6.</span> <span class="hidden">That forces r6c5 to be at least 7, but it cannot be 9.</span> <span class="hidden">Meanwhile, r7c6 = 6, so r6c6 must be at least 7, but cannot be 9 because of the arrow.</span> <span class="hidden">That creates a 6/7/8/9 set in the row, and only r6c3 can be 9.</span> <span class="hidden">On the other hand, if r7c4 = 6, then r6c4 = 1.</span> <span class="hidden">So in either case, r6c3 = 9 and r6c2 = 2.</span> The revealed cells force the choice. <span class="hidden">If r7c4 = 1, there's a 6/7/8 set in r6 in b5, so </span> <span class="hidden">r5c4 = 9 by the dark rule.</span> <span class="hidden">The 7/8 in r6c6 would be on the arrow, </span><span class="hidden">and the circle of that arrow would have to be in r4c6 because otherwise the sum would have to be at least 10, </span><span class="hidden">but there is no longer a digit in b5 greater than r6c6 that can go in it.</span> So <span class="hidden">r7c4 = 6, r6c4 = 1, r7c6 = 1, and r8c6 = 3.</span>

    <p>Back to the arrows. <span class="hidden">The arrow in c6 has at least two cells on the arrow in that column, but </span><span class="hidden">you can never put more than one cell greater than 4 on an arrow, and you've already placed 1/3/4 in c6, so </span><span class="hidden">r4c6 must be the circle, and </span><span class="hidden">r5c6 = 2 by the dark rule.</span> <span class="hidden">r6c9 cannot be less than 3, so r8c9 must be at least 6.</span> <span class="hidden">That forces r8c7 = 4.</span> <span class="hidden">By the dark rule, r7c7 = 2.</span> <span class="hidden">r7c9 must now be at least 5, and if it were any greater the arrow sum would be broken, so r8c9 = 9, r7c9 = 5, and r7c9 = 3.</span>

    <p>Remember what I said about the general approach to greater-than rules. <span class="hidden">1 in b4 can only be r4 by the dark rule.</span> <span class="hidden">That forces r5c7 = 1.</span> <span class="hidden">The 2 in b6 can only be in r4c8 or r4c9.</span> <span class="hidden">It cannot be in r4c9 because the dark rule would force r4c8 = 1.</span> <span class="hidden">r4c9 is on a whisper line, but now it cannot be a low cell: it sees 1/2/3, and if it were 4, r3c9 would have to be 9, but that is already in r8c9.</span> <span class="hidden">So r2c9 and r4c9 are a 7/8 pair.</span> <span class="hidden">r5c9 = 4 is a naked single.</span>

    <p>Time to look at b5 again. <span class="hidden">r5c5 can only be 3/6/7 by sudoku.</span> <span class="hidden">It cannot be 7 because r6c5 would be impossible to fill by the dark rule.</span> <span class="hidden">If it were 6, r6c5 = 7, but </span><span class="hidden">this makes it impossible to fill the arrow in c6: r6c6 could only be 5, but the circle in r4c6 cannot be 7.</span> <span class="hidden">So r5c5 = 3, which makes creates a 1/3 pair in r4c1 and r4c2.</span> <span class="hidden">r4c3 and r4c5 see each and are at least 4, so by the dark rule, r4c4 must be at least 6; but it cannot be 6/7 by sudoku.</span> <span class="hidden">Since the arrow sum in r4c6 must be at least 7, there is a 7/8/9 set in r4c4, r4c6, and r4c9.</span> <span class="hidden">The remaining cells in r4 must be 4/5/6.</span> <span class="hidden">The only possible cell for 9 in b6 is r5c8.</span>

    <p>There's an arrow you haven't done much with. <span class="hidden">r3c4 must be at least 3 by sudoku.</span> <span class="hidden">It cannot be 3 because the dark rule would force a 1/2 into r2c4, so it is at least 4.</span> <span class="hidden">r4c5 must be 4/6 by sudoku, but it can no longer be greater than 5 by the arrow sum, so it is 4.</span> <span class="hidden">r3c4 cannot be greater than 5 by the arrow sum, and if it were 5, the circle would have to be in r3c3, and it would have to contain 9, which breaks sudoku. So r3c4 = 4.</span> This reveals a few more cells and permits some sudoku. <span class="hidden">r3c7 is the only possible place for 9 in r3.</span> <span class="hidden">r2c4 = 3 by the dark rule, which also forces r1c7 = 3.</span> <span class="hidden">r4c7 = 6, so the 5 in b6 must be in r6.</span> <span class="hidden">This means r6c6 must be at least 6, so r4c6 must be at least 8, creating an 8/9 pair in r4 and forcing r4c9 = 7.</span>

    <p>Now think about small digits in b3. <span class="hidden">r1c9 and r3c9 are a 1/2 pair, and you've placed 3 already.</span> <span class="hidden">4 must be in c8, but there are no remaining digits smaller than it, so by the dark rule it must be in r2c8.</span> <span class="hidden">This forces 4 into r1c3, whicihi reveals a few more cells.</span> <span class="hidden">9 in b1 can only be in r1c2 by the dark rule.</span> The rest of the grid is finishable with sudoku.

    <p>Okay! You revealed a short roaming line that leads back to the rest of the map, and the AKARI LANTERN has revealed a bunch of cells all around. You can zoom out and repeatedly undo/redo your last few digits to see exactly what changed, but here's the rundown:

    <ul compact>
        <li>The top boxes of the Courtyard (grid 1) have been revealed, including a whisper line and an eye on top of the grid.</li>
        <li>A few cells in r9 of the Courtyard (grid 1) have been revealed, including a couple of clues that run off the bottom edge.</li>
        <li>There's an eye clue on top of Quarters (grid 2).</li>
        <li>There's a whisper line running off the bottom edge of Quarters (grid 2).</li>
        <li>The rest of the Battlements (grid 4) have been revealed, including an extension of the whisper line in c6 and a book clue in r8c7.</li>
        <li>Several boxes in the Library (grid 5) have been revealed, including a whisper line in b2.</li>
        <li>There are some strange 5s outside of Maintenance (grid 6).</li>
        <li>Several boxes have been revealed in the Hall of Illusions (grid 8), including a few more clues.</li>
        <li>You can finally see a few cells in the Golden Temple (grid 9).</li>
    </ul>

    <p>Let's try to mop up the unfinished business in the earlier grids before heading back to the Library.

<h2>Chapter 22. Courtyard (grid 1)</h2>

    <p>The whisper line in r2 lets you finish this grid. <span class="hidden">r2c8 must be 1/3, so r2c7 must be at least 6, which is the highest it can be; therefore r2c7 = 6 and r2c8 = 1.</span>

    <p>The eye above r1c9 is now looking at a fully-filled-in column, and you can just compute the right value for it. Go ahead and fill it in! <span class="hidden">It sees the 4, 7, and 9, so has a value of 3.</span>

    <p>The new clues off the bottom of the grid are somewhat interesting, but there isn't much you can do without knowing how rules work off-grid. Hmm. Keep it mind for later.

<h2>Chapter 23. Quarters (grid 2)</h2>

    <p>There's clearly no way to fill a digit in the cell on the whisper line beneath r9c4. Hmm indeed.

    <p>The only other new thing here is the eye above r1c5. As before, it's looking at a completed column, so you can just compute the right value: <span class="hidden">it sees the 7, 8, and 9, so it's 9.</span> You can fill that in, and assuming you also filled the eye clue in grid 1... oh hey.

<h2>Chapter 24. Serpent (Hidden Puzzle 2)</h2>

    <p>This sure looks like a grid, and if you click on a cell in it, the puzzle description box confirms that it's a 4&times;4 sudoku. It has no given digits, but it does have four eyes and a ROAMING palindrome line.

    <p>Reasoning about the palindrome is the key here. The center of the palindrome is the pair of r4c1 and the cell immediately beneath it, the one with the eye clue. Cells that are an equal distance away from this will be the same. You'll be thinking about which cells are the same or different without knowing exactly which values they have, so this is a great place to use color (or, if you'd prefer, SudokuPad's letter tool, which will let you mark cells A/B/C/D; you can enable it in the gear menu, then hit the <code>9/A</code> button in any of the number-entry modes).
    
    <p>The palindrome has length 14, so you get 7 pairs from it. Two of them, of course, are just the 3s at the endpoints. Some of the pairs are more immediately helpful than others, but you can really start anywhere.
        
    <p>Looking at the center: <span class="hidden">the palindrome is saying that an eye clue and the first cell it sees must be the same.</span> <span class="hidden">This cannot be 4: the 4 is the highest digit in the grid, so if the first digit is 4, the eye clue must be 1 because no other cells are visible behind it.</span> <span class="hidden">It also cannot be 3, because the eye clue would have to be 2.</span> <span class="hidden">And it cannot be 1, because the eye would have to see at least the 1 and the 4. Therefore it is 2.</span>

    <p>Looking at the ends: <span class="hidden">you can't do much with the eye clues, but you can color the cells in r2c1 and r4c3 the same; I picked blue.</span> <span class="hidden">Sudoku then places the blue digit in r3c2 and r1c4.</span> <span class="hidden">And the palindrome therefore also places it in the eye beneath r4c2.</span>

    <p><span class="hidden">The next cells in from blue are definitely a different digit by sudoku, so you can shade it a different color; I picked purple.</span> <span class="hidden">It must be r2c4 and r4c1 by sudoku, which means it's 2.</span> <span class="hidden">The last cells on the palindrome within the grid are r2c3 and r4c2. Again, these are different digits from the others by sudoku, so you can color them differently; I picked green. Sudoku also puts them in r1c1 and r3c4. And the last four cells can be orange.</span>

    <p>Alright, you've got the pattern of digits set, even if you mostly don't know which is which. How do the eyes constrain the colors? <span class="hidden">Blue cannot be 4 because putting a 4 in r3c2 would force the eye in c2 to see 2 cells, but this is also a blue cell by the palindrome.</span> <span class="hidden">Green cannot be 4 because putting a 4 in r1c1 would force the eye in c1 to see 3 cells.</span> <span class="hidden">Orange being 4 means that the eye in r2 must see 2 cells.</span> <span class="hidden">If blue were 1, the eye in c3 would see four cells, but the palindrome forces its digit to be 2. So blue is 3 and green is 1.</span>

    <p>If you fill all of the cells, including the eyes, you should see the hidden puzzle get checked off in the quest progress box (in the bottom right of the map).

<h2>Chapter 25. Battlements (grid 4)</h2>

    <p>Just a little to mop up here. The new whisper line forces <span class="hidden">r5c6 = 9</span>, which should fill everything except 2-cell and 3-cell sets in each of the bottom six boxes.
        
    <p>It's been a bit since you've used a codex clue, and you're about to head back to the library, so r8c7 is a nice refresher. <span class="hidden">You're placing the 7 in this row. Sudoku forces the digit to be 5/7/9, but r8c5 and r8c9 are already filled with a non-7 digit, so r8c7 = 7.</span>

    <p>Three pairs remain, but there's no way to resolve them for now. Don't get tempted by the Hall of Illusions; time to hit the books.

<h2>Chapter 26. Library (grid 5)</h2>

    <p>Alright, there are two new codex clues in c4, and they're on a whisper line. <span class="hidden">The codex clues have the same high/low polarity.</span> <span class="hidden">If they were high, they'd have to be a 7/9 pair by sudoku.</span> <span class="hidden">r1c5 is adjacent on the whisper line to both, so it would have to be 5 away from a 7, but it cannot be 1 or 2 by sudoku.</span> <span class="hidden">So the codex clues are low, and the other cells on the whipser are high. This puts 7/8 in r2c3.</span>

    <p>Can you constrain that more tightly? <span class="hidden">A 2 eye is very constrained: it must only be able to see the first cell and the 9.</span> <span class="hidden">The 9 is in r6c3, and the 8 must be in c3 in b1, so it is definitely visible in front of the 9. Therefore it must be in r1c3, putting r2c3 = 7.</span> <span class="hidden">This means r1c4 = 2 because of the whisper line.</span> <span class="hidden">This is a codex cell, so r1c2 = 4.</span> <span class="hidden">r1c5 must be at least 7, but it cannot be 7/8 by sudoku, so it is 9.</span> <span class="hidden">r2c4 is 3/4, but it cannot be 3 because it's a codex clue and r2c3 = 7. So it is 4.</span>

    <p>There's some sudoku to be done. <span class="hidden">r3c3 is the last possible cell for 1 in b1.</span> <span class="hidden">This creates a 1/5 pair in c6 in b2.</span> Back in b1, <span class="hidden">the open cells in c2 are 2/9, which makes the open cells in c2 in b7 3/7, which can be placed.</span> <span class="hidden">The 2 in b7 must be in r9c3.</span> <span class="hidden">That means the 4 in r9 must be in r9c8 or r9c9.</span> <span class="hidden">The 4 in c7 can only be in r3c7, which </span><span class="hidden">puts the 9 in c7 into r2c7.</span>

    <p>Aha, the boss cell. Tidy up here with a little sudoku and then head in to find...

<h2>Chapter 27. Book Constrictor (Library boss)</h2>

    <p>Be sure to read the rules, because there's a lot of them. You've got three full columns of codex clues, six killer sudoku cages, and three circled cells that have to contain odd digits. But you've also got to place a snake: a non-branching, orthogonally-connected path through the grid. That's new, so let's spend some time on it.
        
    <p>You're going to want to mark cells for this. I suggest coloring cells that you know the snake doesn't pass through grey, and then you can use yellow for the snake cells. (Green doesn't show up well against the green background.) The rules tell you five things about the snake:
        
    <ol compact>
        <li>The snake starts and ends in the circled cells in b6. You can go ahead and mark these two cells yellow.</li>
        <li>The snake never passes through cages. You can go ahead and mark all of the cage cells grey.</li>
        <li>The snake passes through all of the cells that index themselves: that is, all of the codex cells that contain their own column number. <span class="hidden">By sudoku, there must be a 1 in c1, a 5 in c5, and a 9 in c9, so since every cell in those columns is a codex clue, the snake must visit these three columns for at least one cell.</span></li>
        <li>The snake never touches itself, even diagonally. So if two orthogonally-adjacent cells are both snake cells, they must be consecutive cells on the snake; and if two diagonally-adjacent cells are both snake cells, the snake must make a corner between them. This also means the snake cannot "turn around" in less than three cells:

            <table class="grid">
                <tr><td class="snake"></td><td class="snake"></td></tr>
                <tr><td class="snake"></td><td              ></td></tr>
                <tr><td class="snake"></td><td class="snake"></td></tr>
            </table>
        Otherwise it would touch itself diagonally.</li>
        <li>The snake contains only odd cells. <span class="hidden">So there can be at most five snake cells in a row, column, or box.</span></li>
    </ol>

    <p>You can make some immediate inferences about the snake from all this. The snake cannot pass through the cage in c1, <span class="hidden">but there are only two cells above it, so if the snake entered either of them, it would not be able to turn around and would have to dead-end there, which it cannot.</span> <span class="hidden">Similarly, the snake cannot enter either of the cells beneath the cage in c9.</span> <span class="hidden">If the snake was in either r5c8 or r5c9, it would have to be a four-cell snake, so it could never visit c1 or c5; so these are non-snake cells, and the snake must also be in r3c9.</span> But the snake does have to enter c1 at some point. <span class="hidden">If it did not enter r6c1 (that is, go around the cage in r6), it would have to turn around in b7, but this would require at least 7 cells in the box to be snake, violating the only-odds rule. So it does have to pass through r7c1, r6c1, r5c1, and r5c2.</span> <span class="hidden">If it passed through r4c3, that would be all five odd cells in b4, so both cells in the 11 cage would have to be even, which is not possible.</span> <span class="hidden">Similarly, if it passed through r9c1, that would require all five odd cells in c1, but the 5 cage also needs one.</span> The snake must leave this corner somehow; you can actually constrain it already, but it's not particularly elegant, so let's leave it for now.

    <p>Recall what you learned about codex clues in earlier grids: <span class="hidden">three codex clues in the same column <i>and</i> box must contain one apiece of 1/2/3, 4/5/6, and 7/8/9.</span> <span class="hidden">So the only way to fill the cage in b2 is a 6/9 pair. And these are codex clues, so you've constrained the 5 in b2, b3, and b1.</span> <span class="hidden">The 10 cage must have a 2/8 or 3/7 pair, which means the 5 cannot be in b8 in these two rows; so it must be in r9c4 or r9c5, making r9c5 4/5.</span>

    <p>The snake must pass through self-indexing cells. <span class="hidden">So they cannot be in cages, meaning the 5 cage cannot be 1/4.</span> <span class="hidden">Making it 2/3 restricts the 1 in both b1 and b4.</span> <span class="hidden">If r4c1 = 3, r4c3 = 1; but that only leaves three other odd cells for the snake in the box, which is not enough for it to escape. So r4c1 = 2, r4c2 = 1, r3c1 = 3, and r3c3 = 1.</span> <span class="hidden">Since there is an odd digit in the 11 cage, the snake must pass through the other four odd digits in order to leave the box, so it must pass through r4c2 and r3c2.</span> <span class="hidden">If it did not pass through the 1 in r3c3, there would only have three odd digits left in b1, </span><span class="hidden">so it would have to leave b1 through r2c2 and r2c3, but then its three cells could not include the 5, which must be in r1 in this box. Three cells in a box cannot all be 7/9.</span>

    <p>How does the snake you've been building connect to its ends in b6? <span class="hidden">The end in b1 must connect to r4c9, since otherwise the other end would be cut off.</span> <span class="hidden">If it doesn't go through r1c5, it must go around the 15 cage the other way.</span> <span class="hidden">So it would have to occupy at least r3c4 and r3c6, but that would put 6 odd cells in r3.</span> <span class="hidden">Therefore r1c4, r1c5, and r1c6 must be snake cells; more specifically, </span> <span class="hidden">they must be 1/3/7, because 5 and 9 are already restricted in b2.</span> <span class="hidden">This means r2c4 and r3c4 must be even, so they cannot be snake cells.</span> <span class="hidden">Forcing the snake through r2c3 and r1c3 means there are four snake cells in b1, which means the 5 must be in r1c3.</span> <span class="hidden">There are already four odd cells in r1, so the snake cannot pass through r1c8 or r1c9.</span> Similarly, <span class="hidden">there are four odd cells in r3, so the snake cannot pass through r3c6 or r3c7.</span> <span class="hidden">So it must pass through at least r2c7 and r2c8.</span>

    <p>All these restrictions mean something for the codex clues. In b1, <span class="hidden">the 1 in r1 must be in b2, so r1c1 must be 4/5/6, and it cannot be 5.</span> <span class="hidden">The 1 in r2 must be in b3, so r2c1 must be 7/8/9, and it must be 8.</span> The 5 you placed earlier tells you two things: <span class="hidden">r1c5 = 3, and </span><span class="hidden">the 10 cage in b8 cannot be 3/7.</span>
    
    <p>You've constrained digits interestingly in r1. <span class="hidden">r3c2 and r2c3 are 7/9, so the 9 in r1 must be in b9.</span> <span class="hidden">It cannot be in r1c7 because that would make r1c9 = 7, but the 7 in r1 is already in b2.</span> <span class="hidden">It cannot be in r1c9 because it would be self-indexing, and the snake cannot pass through this cell.</span> Well, hold on, what does that mean? <span class="hidden">The 9 in b3 must be in r1c8, which means it sees every possible snake cell in c9 except r4c9. For the snake to pass through the self-indexing 9, then, it must be true that r4c9 = 9.</span> <span class="hidden">There's also now an odd cell in b1 which isn't on the snake, so there can only be four snake cells in this box, forcing the snake through r2c6 and making that cell 5.</span> <span class="hidden">This makes r2c5 = 6 by the indexing rule, so r3c5 = 9 by the cage, and finally r3c9 = 5.</span> <span class="hidden">This makes r2c3 = 9, so r2c9 = 3 by indexing; that must be a snake cell, and the last snake cell here, r2c7, is 7.</span>

    <p>There's a cage you've been neglecting. <span class="hidden">The 11 cage in c9 must be 4/7 by sudoku, and </span><span class="hidden">the 7 cannot be in b6 or there'll be two 9s in the box. That places those digits; don't forget the 9s.</span> <span class="hidden">The 11 cage in r6 now sees a 4 and 9 in the row and a 5 in both of its columns, so it must be 3/8.</span> <span class="hidden">The snake cells in b4 must be 5/7/9, and r5c2 can only be 9.</span> <span class="hidden">r7c1 can only be 1.</span> <span class="hidden">r6c8 must be odd, but it cannot be 1/3/9 by sudoku, and </span><span class="hidden">it cannot be 5 because of indexing from the 10 cage in b8.</span> <span class="hidden">The 13 cage now sees a 7 and 9, so it must be 5/8, and the 5 must be in r4c7.</span> <span class="hidden">Therefore r4c5 must be 7.</span>
        
    <p>The snake's path is constrained now. <span class="hidden">The 3 and 7 in b5 are in r4 and cannot be visited by the snake.</span> <span class="hidden">So the snake can use at most 3 cells in this box; if it enters r6c4, it must exit as quickly as possible by passing through r6c5 and r6c6, but there simply aren't three odd digits left unplaced in r6.</span> <span class="hidden">Therefore the snake passes through r9c5, as well as r9c4 and r9c6.</span> <span class="hidden">r9c5 must be 5.</span> At this point, sudoku will finish most of the top two-thirds of the puzzle. <span class="hidden">The remaining cells in c5 are 1/4, and the 4 cannot be in r6c5. This eventually sets r3c6 = 4, which forces r1c1 = 6. This puts r1c6 = 1 using the codex clue.</span>

    <p>After you're done up there, get back to the snake. <span class="hidden">The snake must move down into r7c8, which can only be 5.</span> <span class="hidden">That's the last odd digit in c8, so it must turn left into r7c7.</span> A little sudoku will fill in the last of the codex cells; be sure to place the indexed digit appropriately. <span class="hidden">The only legal place for 7 in r9 is r9c3.</span> <span class="hidden">You can finally use the circle clue in r8c3: it is forced to be 3.</span> <span class="hidden">Sudoku forces r8c7 = 8, so the snake must pass into r7c6 and r8c6, using all of the odd digits in b8. Its path through b7 is also completely determined.</span> Sudoku will take care of the last few cells. The boss cell should be filled with <span class="hidden">9</span>.

<h2>Chapter 28. Library (grid 5)</h2>

    <p>Placing that digit reveals the rest of the library grid, but it also reveals a new quest: Wall Sandwiches. This is optional, and frankly it's not much of a puzzle; on the one hand, you can skip it, and on the other hand, it's not really a burden to do it anyway. The reward for completing it is some extra clues for the next few grids. These extra clues can all easily be ignored, so if you don't want them, you can just pretend they're not there either way. This walkthrough will be explaining how to solve the puzzles without them. It's really up to you.

    <p>Anyway, to do Wall Sandwiches, you need to click the quest marker (just below r9c9 in the library) and read the description in the puzzle description box. This will explain the puzzle, and more importantly, it will tell you how to report the answer in a way that will show you the remaining clues. Basically, there are some sandwich icons in the walls outside certain grids; for example, there's a 17 sandwich outside r3 in the Quarters (grid 2). This number is the sum of the cells between two unknown digits in that row or column; the puzzle is to deduce the two digits. Once you've figured them out, you put them, in increasing order, on the appropriate cells in the quest progress box (in the bottom-right of the world map). This will reveal another set of sandwich icons, which you solve the same way. Complete walkthrough:

    <ul compact>
        <li>General idea: <span class="hidden">once you have all the digits placed in a row or column, there's an efficient algorithm for finding the possible sandwich digits for a given sum. Just scan down the row or column. For each cell, sum the following cells until you reach or exceed the target number. If you reach it exactly, you have a pair of possible sandwich digits; otherwise, that digit cannot work.</span></li>
        <li>First sandwich: 17. <span class="hidden">r3 in grid 2 only has only possible set of sandwich digits, 3/8 (which surround 4/7/6). You can check that this also works for the other two clues in grid 1 and grid 4. Enter <code>3 8</code> in the quest progress box.</span></li>
        <li>Second sandwich: 19. <span class="hidden">c2 in grid 5 is ambiguous and allows either 3/8 or 4/5, but only 4/5 works in r9 of grid 6. Enter <code>4 5</code> in the next line of the quest progress box.</span></li>
        <li>Third sandwich: 9. <span class="hidden">r3 in grid 2 works with either 2/9 or 5/7. c6 in grid 2 works with either 2/9, 3/5, or 1/9. Enter <code>2 9</code> in the last line of the quest progress box.</code></span></li>
        <li>The second and third sandwiches also provide some clues for row and columns you haven't fully solved yet; these are the extra clues. If you really don't want them, you can always just delete the answers from the progress box and they'll disappear.</li>
    </ul>

    <p>Back to the normal library grid. Filling the boss cell immediately creates a few sudoku opportunities. It also gives you an arrow, which can be easily solved (<span class="hidden">it's 1/8 because every other option runs afoul of digits already in b9</span>), and that resolves the rest of the grid.

<h2>Chapter 29. Portal (grid X)</h2>

    <p>This is a fun little interlude. The "portal" is a 5&times;6 grid connecting the library grid to the "elsewhere" grid on the right edge of the map. The portal is <i>not</i> a sudoku grid; it's a completely different kind of puzzle called fillomino. In a fillomino puzzle, you are responsible for dividing the grid into orthogonally-connected regions. Regions of the same size can never touch orthogonally. Every cell in a region is filled with the size of the region. So, for example, this is a valid division of a 4&times;3 fillomino grid:
        
        <table class="grid">
            <tr><td class="l t r b">1</td><td class="  t    ">4</td><td class="  t r b">4</td><td class="  t r  ">2</td></tr>
            <tr><td class="l     b">4</td><td class="    r b">4</td><td class="    r  ">3</td><td class="    r b">2</td></tr>
            <tr><td class="l     b">2</td><td class="    r b">2</td><td class="      b">3</td><td class="    r b">3</td></tr>
        </table>
        
    <p>This grid is seeded for you by a 1 and a 2... and by the five digits that overlap c9 of the library grid. So e.g. r2c1 is part of a nine-cell region, each cell of which must be filled with 9. You're going to get started here by applying one of the basic ideas of fillomino: finding a region that needs to grow but is constrained in an interesting way. In this case, <span class="hidden">every region in c1 except the 1 has to grow, and it can only grow to the right.</span> <span class="hidden">Now, the 3 region still needs to grow, but it can grow in two directions, so it's not yet forced to grow anywhere in particular; but the 6-region and 9-region have to grow to the right another cell.</span> <span class="hidden">Now the 6-region has to take its fourth cell in r2c4, but the 9 region can only grow by taking r4c3, which forces the 3 to grow (to its full size) by taking r5c2.</span> And... hmm, it's not clear how to make progress from here.

    <p>This next step is really cool. Hint: <span class="hidden">don't forget how you started.</span> <span class="hidden">c6 of the portal grid overlaps c1 of Elsewhere (grid 7).</span> <span class="hidden">This is a sudoku grid again, and digits can't repeat in it! This is actually mentioned in the rules for the portal grid, but you might have forgotten.</span> <span class="hidden">That means there must be 5 different digits in c6, the same way there are in c1; you can't have a region that runs vertically. And those digits must be in five different regions.</span>

    <p>Do some <span class="hidden">counting</span>. <span class="hidden">There are 5 &times; 6 = 30 cells in this grid.</span> <span class="hidden">The regions that overlap c1 account for 2 + 6 + 9 + 3 + 1 = 21 cells.</span> <span class="hidden">There are also at least two regions in the center of the grid because of the given 1 and 2, and they must be different regions from the c1 regions; so that's 24 cells spoken for.</span> <span class="hidden">So there are only 6 cells at most that can go into new regions that overlap c6.</span> <span class="hidden">If all of the cells in c6 were in new regions, the least number of unaccounted-for cells that would require is 1 + 2 + 3 + 4 + 5 = 15; so at least one of the regions we've already got must overlap c6.</span> <span class="hidden">Only two of them can reach c6: the 6-region and the 9-region.</span> <span class="hidden">So we need at least 3 new regions, and since they can only account for at most 6 more cells, they must be a 1-region, a 2-region, and a 3-region.</span>

    <p>That constrains the regions a lot. <span class="hidden">The 6-region can only reach c6 by being a horizontal from r2c1 to r2c6.</span> Don't forget that you've <span class="hidden">accounted for all of the cells, so you cannot add any regions that don't overlap c6.</span> <span class="hidden">So the only way to fill r1c4 is to put the new 3-region up there.</span> <span class="hidden">The remaining new regions are a 1-region and a 1-region, so only the 9-region can be in r5c3 and r5c4. That's 6 of the 9 cells placed.</span> <span class="hidden">The new 2-region in c6 must extend leftwards into c5.</span> <span class="hidden">It cannot be in r4 without touching the first cell of the old 2-region.</span> <span class="hidden">It cannot be in r5 without making it impossible to place the second cell of the old 2-region. So it is in r5c5 and r5c6.</span> There is only one way to fill out the remaining regions.

<h2>Chapter 30. Elsewhere (grid 7)</h2>

    <p>Finishing the portal reveals most of the next grid. This is an irregular sudoku grid: it follows the normal row and column restrictions of sudoku, but instead of having a regular 3&times;3 array of 3&times;3 boxes, it has arbitrary regions of 9 orthogonally-connected cells. These regions still have the same restriction as boxes, though: they must contain all the digits from 1-9, which means digits cannot repeat within the region.

    <p>You can see the borders of 7 of the regions. The border between the other two can be easily deduced: <span class="hidden">the region that contains r5c5 must also contain the 5 cells to its top, bottom, and left, and running right, it reaches 9 cells at r5c8. You should see that the grid is horizontally symmetric, at least with respect to the regions.</span> If you want to draw this line, you can use SudukuPad's pen tool: click on the gear icon above the number pad, then click on Enable Pen Tool. This adds a fifth entry mode to the right of the number pad; make sure the drop-down box says either "Edge Only" or "Edge and Center", then drag along the edge in the grid to draw a bold edge line there.

<h2>And a whole lot more...</h2>

<h2>Closing notes</h2>

    <p>My thanks to Skeptical Mario for a wonderful puzzle hunt, to <a href="https://svencodes.com/">Sven Neumann</a> for SudokuPad, and to the folks at <a href="https://crackingthecryptic.com/">Cracking the Cryptic</a> for introducing me to a world of puzzles beyond dreary machine-generated killer sudokus.

    <p><i>Sudokuvania: Digits of Despair guide v0.4, written by <a href="mailto:rjmccall@gmail.com">John McCall</a>, July&ndash;August 2025.</i></p>
</body>